"use strict";(self.webpackChunkmoviea=self.webpackChunkmoviea||[]).push([[521],{4521:(e,i,l)=>{l.r(i),l.d(i,{default:()=>y});var s=l(7313),a=l(2388),o=l(1668),d=l(5655),n=l(3749),t=l(798),r=l(2855),c=l(8002),v=l(1962),u=l(2135),h=l(6417);const m=function(e){var i;let{user:l}=e;return(0,h.jsxs)("div",{className:"userCard",children:[(0,h.jsx)("img",{src:(null===l||void 0===l?void 0:l.profileBase64)||(null===l||void 0===l?void 0:l.picture),alt:null===l||void 0===l?void 0:l.name}),(0,h.jsx)("span",{children:null!==l&&void 0!==l&&null!==(i=l.name)&&void 0!==i&&i.includes("@")?null===l||void 0===l?void 0:l.nickname:null===l||void 0===l?void 0:l.name}),(0,h.jsx)(u.rU,{to:"/user/".concat(null===l||void 0===l?void 0:l.sub),children:"Profile"})]})};var p=l(2036),g=l(8491),x=l(7211),j=l(6367),w=l(7864);const y=function(){var e,i,l,y,f,b,N,C,k,S,B,T;const{user:H,isAuthenticated:I}=(0,a.D3)(),[P,L]=(0,s.useState)({}),[O,R]=(0,s.useState)([]),[U,W]=(0,s.useState)([]),[_,Z]=(0,s.useState)([]),E=(0,j.useMediaQuery)({query:"(max-width: 563px)"}),[M,J]=(0,s.useState)(!1),[F,A]=(0,s.useState)([]),[D,z]=(0,s.useState)(!1),[Q,Y]=(0,s.useState)(!1),[q,G]=(0,s.useState)([]);(0,s.useEffect)((()=>{I&&((0,n.cf)((0,n.IO)((0,n.hJ)(d.db,"users"),(0,n.ar)("sub","==",null===H||void 0===H?void 0:H.sub)),(e=>{L(e.docs[0].data())})),(0,n.cf)((0,n.IO)((0,n.hJ)(d.db,"reviews"),(0,n.ar)("ref","==",null===H||void 0===H?void 0:H.sub)),(e=>ne(e.docs.map((e=>({...e.data(),id:e.id})))))));(async()=>{const e=await t.Z.get(r.Z.fetchTrending);W([e.data.results[Math.floor(Math.random()*e.data.results.length)]]),Z(e.data.results)})()}),[I,H]),(0,s.useLayoutEffect)((()=>{(0,n.cf)((0,n.IO)((0,n.hJ)(d.db,"users"),(0,n.b9)(7)),(e=>R(e.docs.map((e=>{var i;return(null===H||void 0===H?void 0:H.sub)!=(null===(i=e.data())||void 0===i?void 0:i.sub)?{...e.data(),id:e.id}:null})))))}),[P]);var[K,V]=(0,s.useState)(0);const[X,$]=(0,s.useState)(""),[ee,ie]=(0,s.useState)(""),[le,se]=(0,s.useState)([]),[ae,oe]=(0,s.useState)(""),[de,ne]=(0,s.useState)([]);(0,s.useEffect)((()=>{"tv"===(null===ee||void 0===ee?void 0:ee.media_type)&&(async()=>{var e;const i=await t.Z.get("https://api.themoviedb.org/3/tv/".concat(null===ee||void 0===ee?void 0:ee.id,"?api_key=20108f1c4ed38f7457c479849a9999cc"));se(null===(e=i.data)||void 0===e?void 0:e.seasons)})()}),[ee]);const te=async()=>{var e;F.length||(null===P||void 0===P||null===(e=P.followList)||void 0===e||e.map((e=>(async e=>{const i=(0,n.JU)(d.db,"users",e);(0,n.QT)(i).then((e=>A((i=>[...i,e.data()]))))})(e))));J(!M)},re=async()=>{var e;q.length||(null===P||void 0===P||null===(e=P.followersList)||void 0===e||e.map((e=>(async e=>{const i=(0,n.JU)(d.db,"users",e);(0,n.QT)(i).then((e=>G((i=>[...i,e.data()]))))})(e))));Y(!Q)},[ce,ve]=(0,s.useState)(!1),[ue,he]=(0,s.useState)(""),[me,pe]=(0,s.useState)(""),ge=[(0,h.jsxs)("div",{className:"selectMediaHolder",children:[(0,h.jsxs)("div",{className:"searchFrinedsBar",children:[(0,h.jsx)("input",{type:"text",placeholder:"Type Media Name",onChange:e=>(async e=>{var i;ie("");const l=await t.Z.get("".concat(r.Z.multiFetch,"&query=").concat(e));(null===(i=l.data.results)||void 0===i?void 0:i.length)>0&&Z(l.data.results)})(e.target.value),id:"mediaSearch"}),(0,h.jsx)("img",{src:v.Z,alt:"searchIcon"})]}),(0,h.jsx)("div",{className:"setSuggestedUsersHolder",children:null===_||void 0===_?void 0:_.map(((e,i)=>(0,h.jsxs)("div",{className:1===_.length?"mediaToSelect selectedMedia":"mediaToSelect",onClick:i=>((e,i)=>{e.stopPropagation(),e.target.parentNode.classList.add("selectedMedia"),ie(i),Z([i])})(i,e),children:[(0,h.jsx)("img",{src:r.Z.image_api+(null===e||void 0===e?void 0:e.poster_path)}),(0,h.jsx)("span",{children:(null===e||void 0===e?void 0:e.title)||(null===e||void 0===e?void 0:e.original_name)})]},i)))})]}),(0,h.jsxs)("div",{className:"selectSeasonToReview selectMediaHolder",children:[(0,h.jsx)("h2",{children:"Select Season"}),(0,h.jsx)("div",{className:"setSuggestedUsersHolder",children:null===le||void 0===le?void 0:le.map(((e,i)=>(0,h.jsxs)("div",{className:1===le.length?"mediaToSelect selectedMedia":"mediaToSelect",onClick:i=>((e,i)=>{e.stopPropagation(),e.target.parentNode.classList.add("selectedMedia"),oe(i),se([i])})(i,e),children:[(0,h.jsx)("img",{src:r.Z.image_api+(null===e||void 0===e?void 0:e.poster_path),alt:(null===e||void 0===e?void 0:e.title)||(null===e||void 0===e?void 0:e.original_name)}),(0,h.jsx)("span",{children:(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.original_name)})]},i)))})]})];return I?(0,h.jsxs)("div",{className:"Account",children:[(0,h.jsx)(p.Ix,{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark"}),(0,h.jsx)(x.Z,{open:M,style:{zIndex:99,padding:"1em"},onClick:()=>J(!M),children:(0,h.jsxs)("div",{className:"followingListHolder",children:[(0,h.jsx)("h1",{children:"following"}),null===F||void 0===F?void 0:F.map((e=>{var i;return(0,h.jsxs)("div",{children:[(0,h.jsxs)("span",{children:[(0,h.jsx)("img",{src:null===e||void 0===e?void 0:e.picture,alt:null===e||void 0===e?void 0:e.name}),null!==e&&void 0!==e&&null!==(i=e.name)&&void 0!==i&&i.includes("@")?null===e||void 0===e?void 0:e.nickname:null===e||void 0===e?void 0:e.name]}),(0,h.jsx)(u.rU,{to:"/user/".concat(null===e||void 0===e?void 0:e.sub),children:"view"})]})})),!(null!==F&&void 0!==F&&F.length)&&"no following yet"]})}),(0,h.jsx)(x.Z,{open:Q,style:{zIndex:99,padding:"1em"},onClick:()=>Y(!Q),children:(0,h.jsxs)("div",{className:"followingListHolder",children:[(0,h.jsx)("h1",{children:"followers"}),null===q||void 0===q?void 0:q.map((e=>{var i;return(0,h.jsxs)("div",{children:[(0,h.jsxs)("span",{children:[(0,h.jsx)("img",{src:null===e||void 0===e?void 0:e.picture,alt:null===e||void 0===e?void 0:e.name}),null!==e&&void 0!==e&&null!==(i=e.name)&&void 0!==i&&i.includes("@")?null===e||void 0===e?void 0:e.nickname:null===e||void 0===e?void 0:e.name]}),(0,h.jsx)(u.rU,{to:"/user/".concat(null===e||void 0===e?void 0:e.sub),children:"view"})]})})),!(null!==q&&void 0!==q&&q.length)&&"no followers yet"]})}),D&&(0,h.jsx)("div",{style:{zIndex:99,padding:"1em"},onClick:e=>{if(!e.target.classList.contains("createRvdiv"))return!1;z(!1)},className:"createRvdiv",children:(0,h.jsxs)("div",{className:"createReview",id:"inDialogComp",onClick:()=>!1,children:[(0,h.jsxs)("div",{className:"createReviewHeader",children:[(0,h.jsx)("img",{src:(null===P||void 0===P?void 0:P.profileBase64)||H.picture,alt:null===H||void 0===H?void 0:H.name,loading:"lazy"}),(0,h.jsx)("input",{placeholder:"type your review...",onChange:e=>$(e.target.value),id:"reviewText"})]}),(0,h.jsx)("div",{className:"ReviewSteps",children:ge[K]}),(0,h.jsxs)("div",{className:"ReviewButtonHolder",children:[0==K?(0,h.jsx)("button",{disabled:!0,children:"Back"}):(0,h.jsx)("button",{onClick:()=>{V(K-1)},children:"Back"}),1==K&&"tv"==(null===ee||void 0===ee?void 0:ee.media_type)||0==K&&"movie"==(null===ee||void 0===ee?void 0:ee.media_type)||0==K&&"tv"==(null===ee||void 0===ee?void 0:ee.media_type)&&0==le.length?(0,h.jsx)("button",{style:{backgroundColor:"#4BB543"},onClick:()=>(async()=>{if(0===X.length)p.Am.error("Type a Review Please \ud83d\ude0a !",{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"});else{const e={ref:H.sub,reviewText:X,selectedMedia:ee,mediaType:null===ee||void 0===ee?void 0:ee.media_type,selectedSeason:ae,date:(new Date).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),time:(new Date).toLocaleTimeString("en-US",{hour12:!0,hour:"numeric",minute:"numeric"})},i=await(0,n.ET)((0,n.hJ)(d.db,"reviews"),e);console.log("Document written with ID: ",i.id),ie(""),oe(""),V(0),$(""),document.getElementById("mediaSearch").value="",document.getElementById("reviewText").value="",Z([]);const l=await t.Z.get(r.Z.fetchTrending);Z(l.data.results),z(!1),p.Am.success("Review Posted \ud83d\ude0a !",{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"})}})(),children:"Post"}):(0,h.jsx)("button",{onClick:()=>{0==K&&(""===ee?p.Am.error("Select Media Please \ud83d\ude0a !",{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"}):V(K+1))},children:"Next"})]})]})}),(0,h.jsxs)("div",{className:"accountHeader",children:[(0,h.jsxs)(u.rU,{to:"/all-about/".concat(null===(e=U[0])||void 0===e?void 0:e.media_type,"/").concat(null===(i=U[0])||void 0===i?void 0:i.id),children:[(0,h.jsx)("div",{className:"imageHolderAcc",children:(0,h.jsx)(c.Z,{src:r.Z.image_api+(null===(l=U[0])||void 0===l?void 0:l.backdrop_path),className:"accountHeaderImage",alt:"cover"})}),(0,h.jsx)("span",{className:"movieCoverTitle",children:(null===(y=U[0])||void 0===y?void 0:y.title)||(null===(f=U[0])||void 0===f?void 0:f.name)})]}),(0,h.jsxs)("div",{className:"profileInfosHolder",children:[(0,h.jsxs)("div",{className:"GlobalInfoHolder",children:[(0,h.jsx)("img",{src:(null===P||void 0===P?void 0:P.profileBase64)||H.picture,alt:null===H||void 0===H?void 0:H.name,onClick:()=>{document.getElementById("imageupload").click()}}),(0,h.jsx)("input",{type:"file",accept:"image/png, image/jpeg",onChange:e=>(async e=>{var i;console.log(e.target.files);let l=new FileReader;if(l.readAsDataURL(null===(i=e.target)||void 0===i?void 0:i.files[0]),l.onload=function(){pe(l.result)},l.onerror=function(e){console.log("Error: ",e)},new Blob([me]).size>1048488)p.Am.error("Try a Smaller Image \ud83d\ude0a !",{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"});else{var s,a;const e=(0,n.JU)(d.db,"users",null===H||void 0===H?void 0:H.sub),i=await(0,n.QT)(e);null!==(s=i.data())&&void 0!==s&&s.profileBase64?null!==(a=i.data())&&void 0!==a&&a.profileBase64&&await(0,n.r7)(e,{profileBase64:me}):await(0,n.pl)(e,{...i.data(),profileBase64:me})}})(e),id:"imageupload"}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h1",{children:null!==H&&void 0!==H&&null!==(b=H.name)&&void 0!==b&&b.includes("@")?null===H||void 0===H?void 0:H.nickname:null===H||void 0===H?void 0:H.name}),!E&&(0,h.jsxs)("h2",{children:[de.length," Reviews . ",(0,h.jsxs)("span",{className:"followingBtn",onClick:()=>re(),children:[(null===P||void 0===P||null===(N=P.followersList)||void 0===N?void 0:N.length)||"0"," follower"]})," . ",(0,h.jsxs)("span",{onClick:()=>te(),className:"followingBtn",children:[(null===P||void 0===P||null===(C=P.followList)||void 0===C?void 0:C.length)||"0"," following"]})," "]})]})]}),!E&&(0,h.jsx)("button",{className:"createRevButton",onClick:()=>{z(!0)},children:"add Review"})]}),E&&(0,h.jsxs)("div",{className:"smallScreenInfoHolder",children:[(0,h.jsxs)("span",{children:[(0,h.jsxs)("span",{children:[de.length," "]}),(0,h.jsx)("span",{children:"Reviews"})]}),(0,h.jsxs)("span",{onClick:()=>re(),children:[(0,h.jsx)("span",{children:(null===P||void 0===P||null===(k=P.followersList)||void 0===k?void 0:k.length)||"0"}),(0,h.jsx)("span",{children:"follower"})]}),(0,h.jsxs)("span",{onClick:()=>te(),children:[(0,h.jsx)("span",{children:(null===P||void 0===P||null===(S=P.followList)||void 0===S?void 0:S.length)||"0"}),(0,h.jsx)("span",{children:"following"})]})]})]}),(0,h.jsxs)("div",{className:"searchFriendsHolder",children:[(0,h.jsxs)("div",{className:"searchFrinedsBar",children:[(0,h.jsx)("input",{type:"text",placeholder:"Type Friend Name",onChange:e=>(async e=>{var i,l,s,a;if(!e)return null;(0,n.cf)((0,n.IO)((0,n.hJ)(d.db,"users"),(0,n.b9)(10),(0,n.ar)("name",">=",(null===(i=e[0])||void 0===i?void 0:i.toLowerCase())+e.slice(1)),(0,n.ar)("name","<=",(null===(l=e[0])||void 0===l?void 0:l.toLowerCase())+e.slice(1)+"\uf8ff")),(e=>{e.docs.length&&R(e.docs.filter((e=>(null===e||void 0===e?void 0:e.id)!=(null===H||void 0===H?void 0:H.sub))).map((e=>({...e.data(),id:e.id}))))})),(0,n.cf)((0,n.IO)((0,n.hJ)(d.db,"users"),(0,n.b9)(10),(0,n.ar)("name",">=",(null===(s=e[0])||void 0===s?void 0:s.toUpperCase())+e.slice(1)),(0,n.ar)("name","<=",(null===(a=e[0])||void 0===a?void 0:a.toUpperCase())+e.slice(1)+"\uf8ff")),(e=>{e.docs.length&&R((i=>[...i,...e.docs.filter((e=>(null===e||void 0===e?void 0:e.id)!=(null===H||void 0===H?void 0:H.sub))).map((e=>({...e.data(),id:e.id})))]))}))})(e.target.value)}),(0,h.jsx)("img",{src:v.Z,alt:"searchIcon",loading:"lazy"})]}),(0,h.jsx)("div",{className:"setSuggestedUsersHolder",children:null===O||void 0===O?void 0:O.map(((e,i)=>(0,h.jsx)(m,{user:e},i)))})]}),(0,h.jsxs)("div",{className:"downSection",children:[(0,h.jsx)("div",{className:"sideSection",children:(0,h.jsxs)("div",{className:"stikcyWrapper",children:[(0,h.jsxs)("div",{className:"bioHolder",children:[(0,h.jsx)("h1",{children:"Intro"}),!ce&&(0,h.jsx)("p",{children:null!==P&&void 0!==P&&P.bio?null===P||void 0===P?void 0:P.bio:"Hey , Welcome To Moviea . Edit your Bio and Share your Profile With Your Friends , Enjoy Watching \ud83d\udc95"}),ce&&(0,h.jsx)("textarea",{onChange:e=>he(e.target.value),className:"bioTextEdit",maxLength:150,children:null!==P&&void 0!==P&&P.bio?null===P||void 0===P?void 0:P.bio:"Hey , Welcome To Moviea . Edit your Bio and Share your Profile With Your Friends , Enjoy Watching \ud83d\udc95"}),!ce&&(0,h.jsx)("button",{onClick:()=>ve(!0),children:"Edit"}),ce&&(0,h.jsxs)("div",{className:"bioButtonsHolder",children:[(0,h.jsx)("button",{onClick:()=>ve(!1),className:"cancelBioBtn",children:"cancel"}),(0,h.jsx)("button",{className:"saveBioBtn",onClick:()=>{(async()=>{var e;const i=(0,n.JU)(d.db,"users",null===H||void 0===H?void 0:H.sub),l=await(0,n.QT)(i);null!==(e=l.data())&&void 0!==e&&e.bio?await(0,n.r7)(i,{bio:ue}):await(0,n.pl)(i,{...l.data(),bio:ue})})(),ve(!1)},children:"Save"})]})]}),(null===P||void 0===P||null===(B=P.recentlyWatched)||void 0===B?void 0:B.length)>=1&&(0,h.jsxs)("div",{className:"latestHolder",children:[(0,h.jsxs)("h1",{children:["recently watched ",(0,h.jsx)("span",{onClick:()=>(async()=>{var e,i;const l=(0,n.JU)(d.db,"users",null===H||void 0===H?void 0:H.sub),s=await(0,n.QT)(l);null!==(e=s.data())&&void 0!==e&&e.recentlyWatchedPrivacy?"public"==(null===(i=s.data())||void 0===i?void 0:i.recentlyWatchedPrivacy)?await(0,n.r7)(l,{recentlyWatchedPrivacy:"privet"}):await(0,n.r7)(l,{recentlyWatchedPrivacy:"public"}):await(0,n.pl)(l,{...s.data(),recentlyWatchedPrivacy:"privet"})})(),children:(null===P||void 0===P?void 0:P.recentlyWatchedPrivacy)||"public"})]}),(0,h.jsx)("div",{className:"wrapperLatest",children:null===P||void 0===P||null===(T=P.recentlyWatched)||void 0===T?void 0:T.map((e=>(0,h.jsxs)(u.rU,{to:null===e||void 0===e?void 0:e.redirectToWatch,className:"latest",children:[(0,h.jsx)("img",{src:null===e||void 0===e?void 0:e.image,alt:"latest"}),(0,h.jsxs)("span",{children:[(null===e||void 0===e?void 0:e.nameWhenTn)||(null===e||void 0===e?void 0:e.name),e.episode?" Ep - "+e.episode:""]}),(0,h.jsx)(w.Wxs,{})]})))})]})]})}),(0,h.jsxs)("div",{className:"reviewSection",children:[(0,h.jsxs)("div",{className:"createReviewUiButton",onClick:()=>{z(!0)},children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("img",{src:(null===P||void 0===P?void 0:P.profileBase64)||H.picture,alt:null===H||void 0===H?void 0:H.name,loading:"lazy"}),(0,h.jsx)("input",{placeholder:"Type Your Review...",readOnly:!0})]}),(0,h.jsx)("span",{children:"Post"})]}),(0,h.jsxs)("div",{className:"reviewsHolder",children:[(0,h.jsx)("div",{className:"reviewsContainer",children:de.map(((e,i)=>(0,h.jsx)(g.Z,{review:e,user:P},i)))}),!de.length&&(0,h.jsxs)("div",{className:"noReviewHolder",children:["You Have No Reviews Yet , ",(0,h.jsx)("span",{onClick:()=>{z(!0)},children:"Create One"})," !"]})]})]})]})]}):(0,h.jsx)(o.l_,{to:"/"})}}}]);