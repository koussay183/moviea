"use strict";(self.webpackChunkmoviea=self.webpackChunkmoviea||[]).push([[809],{7598:(e,l,a)=>{a.r(l),a.d(l,{default:()=>p});var s=a(7313),i=a(2388),o=a(1668),d=a(5655),n=a(3749),t=a(798);const u=new Map;var r=a(6367),c=a(2036),v=a(8002),m=(a(1962),a(6417));a(8491);var h=a(2135),b=a(2855);function x(){const{user:e,isAuthenticated:l}=(0,i.D3)(),[a,x]=((0,r.useMediaQuery)({query:"(max-width: 563px)"}),(0,s.useState)({})),[p,w]=(0,s.useState)([]),[j,f]=(0,s.useState)(!1),[g,k]=(0,s.useState)([]),[C,S]=(0,s.useState)(!1),[y,N]=(0,s.useState)(!1),[T,B]=(0,s.useState)([]),[M,O]=(0,s.useState)(!1),[Z,U]=(0,s.useState)(""),[D,H]=(0,s.useState)(""),[I,J]=(0,s.useState)([]),{data:R}=((e,l)=>{const[a,i]=(0,s.useState)(null),[o,d]=(0,s.useState)(!0),[n,r]=(0,s.useState)(null),c=(0,s.useCallback)((async()=>{try{d(!0);const a=u.get(e);if(a&&Date.now()-a.timestamp<3e5)return i(a.data),void d(!1);const s=await t.Z.get(e),o=l?l(s.data):s.data;u.set(e,{data:o,timestamp:Date.now()}),i(o),r(null)}catch(a){r(a),console.error("Error fetching data:",a)}finally{d(!1)}}),[e,l]);return(0,s.useEffect)((()=>{c()}),[c]),{data:a,loading:o,error:n,refetch:(0,s.useCallback)((()=>{u.delete(e),c()}),[c,e])}})(b.Z.fetchTrending,(e=>[e.results[Math.floor(Math.random()*e.results.length)]])),L=((0,s.useCallback)((()=>{if(null!==e&&void 0!==e&&e.sub)return(0,n.cf)((0,n.IO)((0,n.hJ)(d.db,"users"),(0,n.ar)("sub","==",e.sub)),(e=>{e.docs.length>0&&x(e.docs[0].data())}))}),[null===e||void 0===e?void 0:e.sub]),(0,s.useCallback)((()=>{if(null!==e&&void 0!==e&&e.sub)return(0,n.cf)((0,n.IO)((0,n.hJ)(d.db,"reviews"),(0,n.ar)("ref","==",e.sub)),(e=>J(e.docs.map((e=>({...e.data(),id:e.id}))))))}),[null===e||void 0===e?void 0:e.sub]),(0,s.useCallback)((()=>(0,n.cf)((0,n.IO)((0,n.hJ)(d.db,"users"),(0,n.b9)(7)),(l=>{w(l.docs.map((l=>{var a;return(null===e||void 0===e?void 0:e.sub)!==(null===(a=l.data())||void 0===a?void 0:a.sub)?{...l.data(),id:l.id}:null})).filter(Boolean))}))),[null===e||void 0===e?void 0:e.sub]),(0,s.useCallback)((async e=>{const l=(0,n.JU)(d.db,"users",e),a=await(0,n.QT)(l);k((e=>[...e,a.data()]))}),[])),_=(0,s.useCallback)((async e=>{const l=(0,n.JU)(d.db,"users",e),a=await(0,n.QT)(l);B((e=>[...e,a.data()]))}),[]),Q=((0,s.useCallback)((async()=>{var e;g.length||await Promise.all((null===a||void 0===a||null===(e=a.followList)||void 0===e?void 0:e.map(L))||[]);f((e=>!e))}),[g.length,null===a||void 0===a?void 0:a.followList,L]),(0,s.useCallback)((async()=>{var e;T.length||await Promise.all((null===a||void 0===a||null===(e=a.followersList)||void 0===e?void 0:e.map(_))||[]);N((e=>!e))}),[T.length,null===a||void 0===a?void 0:a.followersList,_]),(0,s.useCallback)((async()=>{var l;if(null===e||void 0===e||!e.sub)return;const a=(0,n.JU)(d.db,"users",e.sub),s=await(0,n.QT)(a);null!==(l=s.data())&&void 0!==l&&l.bio?await(0,n.r7)(a,{bio:Z}):await(0,n.pl)(a,{...s.data(),bio:Z})}),[null===e||void 0===e?void 0:e.sub,Z]),(0,s.useCallback)((async l=>{const a=l.target.files[0],s=new FileReader;s.onloadend=async()=>{var l;if(H(s.result),null===e||void 0===e||!e.sub)return;const a=(0,n.JU)(d.db,"users",e.sub),i=await(0,n.QT)(a);null!==(l=i.data())&&void 0!==l&&l.profileBase64?await(0,n.r7)(a,{profileBase64:s.result}):await(0,n.pl)(a,{...i.data(),profileBase64:s.result})},a&&s.readAsDataURL(a)}),[null===e||void 0===e?void 0:e.sub]),(0,s.useMemo)((()=>{var e,l,a,s,i;return(0,m.jsx)("div",{className:"accountHeader",children:(0,m.jsxs)(h.rU,{to:"/all-about/".concat(null===R||void 0===R||null===(e=R[0])||void 0===e?void 0:e.media_type,"/").concat(null===R||void 0===R||null===(l=R[0])||void 0===l?void 0:l.id),children:[(0,m.jsx)("div",{className:"imageHolderAcc",children:(0,m.jsx)(v.Z,{src:b.Z.image_api+(null===R||void 0===R||null===(a=R[0])||void 0===a?void 0:a.backdrop_path),className:"accountHeaderImage",alt:"cover"})}),(0,m.jsx)("span",{className:"movieCoverTitle",children:(null===R||void 0===R||null===(s=R[0])||void 0===s?void 0:s.title)||(null===R||void 0===R||null===(i=R[0])||void 0===i?void 0:i.name)})]})})}),[R]));return l?(0,m.jsxs)("div",{className:"Account",children:[(0,m.jsx)(c.Ix,{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark"}),Q]}):(0,m.jsx)(o.l_,{to:"/"})}const p=s.memo(x)},8002:(e,l,a)=>{a.d(l,{Z:()=>o});var s=a(7313),i=a(6417);const o=function(e){const[l,a]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{const l=new Image;l.onload=()=>{a(!0)},l.src=e.src}),[e.src]),(0,i.jsxs)(i.Fragment,{children:[!l&&(0,i.jsx)("div",{className:"skeleton-box",id:"skeleton-box"}),l&&(0,i.jsx)("img",{src:e.src,...e})]})}},9625:(e,l,a)=>{a.d(l,{Z:()=>o});var s=a(7313),i=a(6417);const o=function(e){let{text:l,max:a}=e;const[o,d]=(0,s.useState)(!1);return(0,i.jsxs)("p",{className:"reviewText",children:[o?l:null===l||void 0===l?void 0:l.substring(0,a)," ",(null===l||void 0===l?void 0:l.length)>=a&&(0,i.jsx)("span",{onClick:()=>d(!o),className:"showMoreBtn",children:o?"See less":"... See more"})]})}},8491:(e,l,a)=>{a.d(l,{Z:()=>v});var s=a(7313),i=a(2855),o=a(2135),d=a(9625),n=a(2539),t=a(3749),u=a(5655),r=a(2036),c=a(6417);const v=function(e){var l,a,v,m,h,b,x,p;let{review:w,user:j,level:f}=e;const[g,k]=(0,s.useState)(!1);return(0,c.jsxs)("div",{className:"Review",children:[g&&(0,c.jsxs)("div",{className:"optionsHolder",children:[(0,c.jsxs)("div",{onClick:()=>{k(!1)},children:[(0,c.jsx)(n.U$P,{})," Edit Review"]}),(0,c.jsxs)("div",{onClick:()=>{(async()=>{k(!1),await(0,t.oe)((0,t.JU)(u.db,"reviews",w.id)),r.Am.success("Review Deleted \ud83d\ude0a !",{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"})})()},children:[(0,c.jsx)(n.ZkW,{})," Delete Review"]}),(0,c.jsxs)("div",{onClick:()=>{k(!1)},children:[(0,c.jsx)(n.KQY,{})," Share Review"]})]}),(0,c.jsxs)("div",{className:"ReviewHeader",children:[(0,c.jsxs)("span",{children:[(0,c.jsx)("img",{src:(null===j||void 0===j?void 0:j.profileBase64)||j.picture,alt:null===j||void 0===j?void 0:j.name}),(0,c.jsxs)("span",{children:[(0,c.jsx)("h1",{children:null!==j&&void 0!==j&&null!==(l=j.name)&&void 0!==l&&l.includes("@")?null===j||void 0===j?void 0:j.nickname:null===j||void 0===j?void 0:j.name}),(0,c.jsx)("h2",{children:(new Date).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})==(null===w||void 0===w?void 0:w.date)?"Today , "+(null===w||void 0===w?void 0:w.time):null===w||void 0===w||null===(a=w.date)||void 0===a?void 0:a.slice((null===w||void 0===w||null===(v=w.date)||void 0===v?void 0:v.indexOf(","))+1)})]})]}),"user"!==f&&(0,c.jsxs)("div",{className:"optionsBtn",onClick:()=>k(!g),children:[(0,c.jsx)("span",{}),!g&&(0,c.jsx)("span",{}),(0,c.jsx)("span",{})]}),"user"===f&&(0,c.jsxs)("div",{className:"optionsBtn",children:[(0,c.jsx)("span",{}),(0,c.jsx)("span",{}),(0,c.jsx)("span",{})]})]}),(0,c.jsx)(d.Z,{text:null===w||void 0===w?void 0:w.reviewText,max:80}),(0,c.jsx)("img",{src:i.Z.image_api+(null===w||void 0===w||null===(m=w.selectedMedia)||void 0===m?void 0:m.backdrop_path),className:"mediaImage"}),(0,c.jsxs)("div",{className:"mediaInfoHolder",children:[(0,c.jsxs)("span",{children:["movie"==(null===w||void 0===w?void 0:w.mediaType)?null===w||void 0===w||null===(h=w.selectedMedia)||void 0===h?void 0:h.title:(null===w||void 0===w||null===(b=w.selectedSeason)||void 0===b?void 0:b.name)||(null===w||void 0===w||null===(x=w.selectedMedia)||void 0===x?void 0:x.original_name),"  ( ",null===w||void 0===w?void 0:w.mediaType," )"]}),(0,c.jsx)(o.rU,{to:"/all-about/".concat(w.mediaType,"/").concat(null===w||void 0===w||null===(p=w.selectedMedia)||void 0===p?void 0:p.id),children:"watch now"})]})]})}}}]);