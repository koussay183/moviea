"use strict";(self.webpackChunkmoviea=self.webpackChunkmoviea||[]).push([[933],{1962:(e,t,s)=>{s.d(t,{Z:()=>a});s(7313);const a=s.p+"static/media/search.2c19e67fbf22fbfeb1d92652e431e5ce.svg"},4933:(e,t,s)=>{s.r(t),s.d(t,{default:()=>I});var a=s(7313),n=s(424),o=s(2135),i=s(6367),r=s(182),c=s(4850),l=s(5710),h=s(798),d=s(848),m=s(6417);const p=function(){return(0,m.jsx)("h1",{id:"Logo",className:"Logo",children:(0,m.jsx)(o.rU,{to:"/",style:{letterSpacing:"0.01em"},children:(0,m.jsx)("img",{src:d.Z,alt:"logo",className:"logoImage"})})})};var u=s(1962),g=s(7452);const x=a.memo((e=>{let{Class:t,setMovies:s,showSearchMenu:o,setShowSearchMenu:r}=e;const c="function"===typeof s?s:()=>{},[l,h]=(0,a.useState)(""),[d,p]=(0,a.useState)(!1),x=((0,i.useMediaQuery)({query:"(max-width: 563px)"}),(0,n.TH)()),v=(0,n.s0)(),f=(e,t)=>{let s=null;const a=function(){for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];const i=this;s&&clearTimeout(s),p(!0),g.d.update((e=>{e.loading=!0})),console.log("Debouncing search with term:",n[0]),s=setTimeout((()=>{try{console.log("Debounce complete, executing search for:",n[0]),e.apply(i,n)}catch(t){console.error("Error in debounced function:",t)}finally{p(!1),s=null}}),t)};return a.cancel=function(){s&&(console.log("Debounce canceled manually"),clearTimeout(s),s=null,p(!1),g.d.update((e=>{e.loading=!1})))},a},j=(0,a.useCallback)((e=>{if(console.log("handleDebouncedSearch called with query:",e),r&&r(!!e),!e)return console.log("Empty query, clearing movies and navigating home if needed"),c([]),x.pathname.startsWith("/search-page")&&v("/"),void g.d.update((e=>{e.loading=!1}));const t="/search-page?q=".concat(encodeURIComponent(e));console.log("Navigating to:",t),v(t,{replace:!1})}),[v,x.pathname,c,r]),w=(0,a.useMemo)((()=>f(j,1500)),[j]);(0,a.useEffect)((()=>{if(w)return()=>{if(w&&"function"===typeof w.cancel)try{w.cancel()}catch(e){console.error("Error cancelling debounced search:",e),g.d.update((e=>{e.loading=!1}))}else g.d.update((e=>{e.loading=!1}))}}),[w]);return(0,m.jsxs)("div",{className:t,children:[(0,m.jsx)("input",{type:"text",placeholder:"Search for a movie or tv show...",onChange:e=>{if(!e||"undefined"===typeof e.target)return void console.error("Invalid event object in handleInputChange");const t=e.target.value;console.log("Search input value:",t),h(t);try{g.d.update((e=>{e.loading=t.trim().length>0}))}catch(a){console.error("Error updating AppStore:",a)}if(!t||""===t.trim())return c([]),void(x.pathname.startsWith("/search-page")&&v("/"));const s=t.trim();console.log("Calling debouncedSearch with:",s),"function"===typeof w?w(s):console.error("debouncedSearch is not a function")},value:l,id:"searchInput"}),(0,m.jsx)("img",{src:u.Z,alt:"search icon"})]})}));x.displayName="SearchBar";const v=x;const f=function(e){let{watchListLen:t}=e;const{watchListLen:s}=(0,l.B)(),a=void 0!==t?t:s;return(0,m.jsx)("button",{className:"WatchListButton",id:"WatchListButton",children:(0,m.jsxs)(o.rU,{to:"/watch-list",children:["watch list",0!==a?(0,m.jsx)("span",{className:"badge",children:a}):""]})})};var j=s(8821);const w=function(e){let{setMovies:t,showSearchMenu:s,setShowSearchMenu:a,watchListLen:r,setIsLoading:l,setShowSideBar:h}=e;const d=(0,i.useMediaQuery)({query:"(max-width: 460px)"}),p=(0,i.useMediaQuery)({query:"(min-width: 564px)"}),{currentUser:u,loading:g}=(0,c.aC)(),x=(0,n.s0)();return(0,m.jsxs)("div",{className:"MenuBox",id:"MenuBox",children:[p&&(0,m.jsx)(v,{Class:"SearchBar",setMovies:t,showSearchMenu:s,setShowSearchMenu:a}),!u&&(0,m.jsx)("button",{className:"loginButton WatchListButton",onClick:()=>x("/login"),children:"Login"}),!d&&(0,m.jsx)(f,{watchListLen:r}),u&&(0,m.jsx)(o.rU,{to:"/profile",className:"accountLink",children:(0,m.jsx)("img",{src:u.photoURL||"/MOVIEA.png",alt:"user avatar",className:"userAvatar"})}),(0,m.jsx)("button",{className:"sideBarOpen",onClick:()=>h((e=>!e)),children:(0,m.jsx)(j.FQA,{})})]})};var b=s(7864);const y=function(e){let{setMovieQuery:t,movies:s,setMovies:i,showSearchMenu:r,setShowSearchMenu:l,watchListLen:h,setIsLoading:u}=e;const g=(0,n.TH)(),x=(0,n.s0)(),{currentUser:v}=(0,c.aC)(),[f,y]=(0,a.useState)(!1);return(0,m.jsxs)("nav",{id:"NavBar",style:{backgroundImage:"/reels"==g.pathname?"linear-gradient(90deg, rgba(2,0,36,1) 0%, rgba(4,28,50,1) 35%, rgba(8,44,51,1) 100%)":""},children:[f&&(0,m.jsxs)("div",{className:"sideNavBar",children:[(0,m.jsxs)("div",{className:"sideBarHeader",children:[(0,m.jsx)("img",{alt:"logo",src:d.Z}),(0,m.jsx)(b.oHP,{onClick:()=>y(!1)})]}),(0,m.jsxs)("div",{className:"sideBarMain",children:[(0,m.jsxs)(o.rU,{to:"/",onClick:()=>y(!1),children:[(0,m.jsx)(b.iqr,{}),"Home"]}),(0,m.jsxs)(o.rU,{to:"/reels",onClick:()=>y(!1),children:[(0,m.jsx)(j.Y22,{}),"Reels            "]}),"            ",(0,m.jsxs)(o.rU,{to:"/profile",onClick:()=>{if(y(!1),!v)return x("/login")},children:[(0,m.jsx)(b.nf1,{}),"Profile"]}),(0,m.jsxs)(o.rU,{to:"/watch-list",onClick:()=>y(!1),children:[(0,m.jsx)(j.l$c,{}),"Watch List"]})]})]}),(0,m.jsxs)("div",{className:"innerNavBar",children:[(0,m.jsx)(p,{}),(0,m.jsx)(w,{setMovieQuery:t,movies:s,setMovies:i,showSearchMenu:r,setShowSearchMenu:l,watchListLen:h,setIsLoading:u,setShowSideBar:y})]})]})};var S=s(7029),L=s(4686),M=s(2855);const A=()=>{s.e(915).then(s.bind(s,8915)),s.e(637).then(s.bind(s,2637))};"undefined"!==typeof window&&("complete"===document.readyState?A():window.addEventListener("load",A));const W={AllAbout:()=>Promise.all([s.e(672),s.e(295),s.e(916),s.e(131),s.e(851),s.e(783)]).then(s.bind(s,4530)),ALLMovies:()=>Promise.all([s.e(672),s.e(295),s.e(804),s.e(906)]).then(s.bind(s,1957)),WatchList:()=>Promise.all([s.e(672),s.e(295),s.e(539),s.e(593),s.e(205),s.e(313)]).then(s.bind(s,1492)),AboutCast:()=>Promise.all([s.e(672),s.e(295),s.e(604)]).then(s.bind(s,8300)),CastsPage:()=>Promise.all([s.e(672),s.e(849)]).then(s.bind(s,528)),Discover:()=>Promise.all([s.e(672),s.e(295),s.e(205),s.e(23)]).then(s.bind(s,9512)),SeasonEpisodesPage:()=>Promise.all([s.e(672),s.e(916),s.e(768),s.e(803)]).then(s.bind(s,5901)),Account:()=>Promise.all([s.e(539),s.e(916),s.e(131),s.e(561),s.e(809)]).then(s.bind(s,6653)),ShortsPage:()=>Promise.all([s.e(672),s.e(768),s.e(884)]).then(s.bind(s,5569)),Login:()=>s.e(535).then(s.bind(s,565)),Register:()=>s.e(685).then(s.bind(s,4415)),Profile:()=>Promise.all([s.e(672),s.e(295),s.e(845)]).then(s.bind(s,8066)),PrivateRoute:()=>s.e(954).then(s.bind(s,1040)),RamadanPage:()=>s.e(695).then(s.bind(s,788)),Row:()=>Promise.all([s.e(672),s.e(295),s.e(41)]).then(s.bind(s,5828)),ShortsRow:()=>Promise.all([s.e(672),s.e(25)]).then(s.bind(s,3880)),ReelsPage:()=>Promise.all([s.e(295),s.e(768),s.e(951)]).then(s.bind(s,3946)),SearchPage:()=>Promise.all([s.e(672),s.e(295),s.e(205),s.e(855)]).then(s.bind(s,9138)),Under:()=>s.e(907).then(s.bind(s,4173)),UserProfilePage:()=>Promise.all([s.e(539),s.e(131),s.e(561),s.e(273)]).then(s.bind(s,4447)),PrivacyPolicy:()=>s.e(963).then(s.bind(s,1815))},P=a.memo((e=>{let{component:t,...s}=e;const n=(0,a.useMemo)((()=>(0,m.jsx)(S.Z,{})),[]);return(0,m.jsx)(L.ZP,{children:(0,m.jsx)(a.Suspense,{fallback:n,children:(0,m.jsx)(t,{...s})})})})),U=Object.entries(W).reduce(((e,t)=>{let[s,n]=t;const o=a.lazy(n);return o.preload=n,e[s]=o,e}),{});function N(){const e=(0,i.useMediaQuery)({query:"(max-width: 563px)"},void 0,(()=>{})),[t,d]=(0,a.useState)({}),[p,u]=(0,a.useState)([]),[g,x]=(0,a.useState)(!1),{watchList:f,watchListLen:j,addToWatchlist:w,removeFromWatchlist:b,setWatchList:L,setWatchListLen:A}=(0,l.B)(),{currentUser:N}=(0,c.aC)(),[I,R]=(0,a.useState)([]),[T,C]=(0,a.useState)([]),[k,E]=(0,a.useState)([]),[Z,B]=(0,a.useState)(!0),[O,_]=(0,a.useState)(!0),D=(0,n.TH)();(0,a.useEffect)((()=>{u([])}),[]),(0,a.useLayoutEffect)((()=>{_(!1),B(!1)}),[p]),(0,a.useEffect)((()=>{R([...T,...k])}),[T,k]),(0,a.useEffect)((()=>{(async()=>{try{B(!0);const[e,t]=await Promise.all([h.Z.get("/genres/movie"),h.Z.get("/genres/tv")]);C(e.data.genres),E(t.data.genres),R([...e.data.genres,...t.data.genres]),B(!1)}catch(e){console.error("Error fetching initial data:",e),B(!1)}})()}),[]),(0,a.useEffect)((()=>{if("requestIdleCallback"in window){const e=["AllAbout","Row","ShortsRow"];requestIdleCallback((()=>{e.forEach((e=>{(0,W[e])()}))}))}}),[]);const q=["/reels","/account","/login","/register","/profile"],F=(0,a.useMemo)((()=>q.some((e=>D.pathname.startsWith(e)))),[D.pathname]);return(0,m.jsxs)("div",{className:"App",children:[(0,m.jsxs)(r.q,{children:[(0,m.jsx)("title",{children:"Moviea | Watch Free"}),(0,m.jsx)("meta",{name:"description",content:"With moviea.tn you can watch free movies online anytime, on any device. It's never been easier to stream movies so get started. | movies | tv shows | movie | free movies | watch free | film complete | film | stream"}),(0,m.jsx)("meta",{name:"keywords",content:"moviea moviea.tn moviea tn movies tn film tunsi aflem tunsia watch free  \u0645\u0634\u0627\u0647\u062f\u0629 \u0623\u0641\u0644\u0627\u0645 \u0648\u0645\u0633\u0644\u0633\u0644\u0627\u062a \u062a\u062f\u0641\u0642 \u0627\u0644\u0623\u0641\u0644\u0627\u0645 \u0648\u0627\u0644\u0628\u0631\u0627\u0645\u062c \u0627\u0644\u062a\u0644\u0641\u0632\u064a\u0648\u0646\u064a\u0629 \u062a\u062d\u0645\u064a\u0644 \u0645\u062d\u062a\u0648\u0649 \u0639\u0631\u0628\u064a \u0645\u0633\u0644\u0633\u0644\u0627\u062a \u0639\u0631\u0628\u064a\u0629 \u0623\u0641\u0644\u0627\u0645 \u0647\u0648\u0644\u064a\u0648\u0648\u062f \u062a\u0631\u0641\u064a\u0647 \u0639\u0631\u0628\u064a \u0623\u062d\u062f\u062b \u0627\u0644\u0623\u0641\u0644\u0627\u0645 \u0648\u0627\u0644\u0645\u0633\u0644\u0633\u0644\u0627\u062a \u0645\u0648\u0642\u0639 \u062a\u062f\u0641\u0642 \u0627\u0644\u0623\u0641\u0644\u0627\u0645 \u062a\u0631\u0641\u064a\u0647 \u0639\u0644\u0649 \u0627\u0644\u0625\u0646\u062a\u0631\u0646\u062a \u0645\u0648\u0642\u0639 \u0645\u0634\u0627\u0647\u062f\u0629 \u0627\u0644\u0623\u0641\u0644\u0627\u0645 \u0648\u0627\u0644\u0645\u0633\u0644\u0633\u0644\u0627\u062a Watch Movies and TV Shows Stream Movies and TV Series Download Arabic Content Arabic TV Series Hollywood Movies Arabic Entertainment Latest Movies and Series Online Entertainment Movie Streaming Website Watch Movies and Series Online"}),(0,m.jsx)("meta",{property:"og:type",content:"website"}),(0,m.jsx)("meta",{property:"og:url",content:"https://moviea.tn"}),(0,m.jsx)("meta",{property:"og:title",content:"Watch Movies | Tv-Shows Online Free"}),(0,m.jsx)("meta",{property:"og:description",content:"With Moviea you can watch free movies online anytime, on any device"}),(0,m.jsx)("meta",{property:"og:image",content:"https://assets.nflxext.com/ffe/siteui/vlv3/b85863b0-0609-4dba-8fe8-d0370b25b9ee/e7e23acb-d3f4-4c16-87da-22b5e0289506/TN-en-20230731-popsignuptwoweeks-perspective_alpha_website_large.jpg"}),(0,m.jsx)("meta",{property:"twitter:card",content:"summary_large_image"}),(0,m.jsx)("meta",{property:"twitter:url",content:"https://moviea.tn"}),(0,m.jsx)("meta",{property:"twitter:title",content:"Watch Movies | Tv-Shows Online Free"}),(0,m.jsx)("meta",{property:"twitter:description",content:"With Moviea you can watch free movies online anytime, on any device"}),(0,m.jsx)("meta",{property:"twitter:image",content:"https://assets.nflxext.com/ffe/siteui/vlv3/b85863b0-0609-4dba-8fe8-d0370b25b9ee/e7e23acb-d3f4-4c16-87da-22b5e0289506/TN-en-20230731-popsignuptwoweeks-perspective_alpha_website_large.jpg"}),(0,m.jsx)("meta",{name:"theme-color",content:"#0d354f"}),(0,m.jsx)("link",{rel:"preconnect",href:"https://image.tmdb.org"}),(0,m.jsx)("link",{rel:"dns-prefetch",href:"https://image.tmdb.org"})]}),Z&&(0,m.jsx)(S.Z,{}),O&&(0,m.jsx)(S.Z,{}),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(y,{movies:p,setMovies:u,showSearchMenu:g,setShowSearchMenu:x,watchListLen:j,setIsLoading:B}),e&&!F&&(0,m.jsx)("div",{className:"SearchBarHolderWhenOnMobile",children:(0,m.jsx)(v,{Class:"SearchBar SearchBarOnMobile",movies:p,setMovies:u,showSearchMenu:g,setShowSearchMenu:x})}),(0,m.jsxs)(n.Z5,{children:[(0,m.jsx)(n.AW,{path:"/",element:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"genreHolder",children:(0,m.jsx)("div",{className:"row__posters",children:I.map((e=>e.name&&(0,m.jsx)(o.rU,{id:e.id,className:"genree",to:"/discover/genre/".concat(e.id,"/").concat(e.name),children:e.name},"genre-".concat(e.id,"-").concat(e.name))))})}),(0,m.jsxs)("main",{children:[(0,m.jsx)(P,{component:U.Row,title:"Rakcha Tunsi",fetchUrl:"/arabic/categories/1555624",isShofha:!0,setAllAboutMovie:d,setIsLoading:B,mediaType:"tv"}),(0,m.jsx)(P,{component:U.Row,title:"Trend Now",fetchUrl:M.Z.fetchTrending,setAllAboutMovie:d,setIsLoading:B,isLarge:!e}),(0,m.jsx)(P,{component:U.Row,title:"Netflix Originals",fetchUrl:M.Z.fetchNetflixOriginals,setAllAboutMovie:d,setIsLoading:B,mediaType:"tv"}),(0,m.jsx)(P,{component:U.Row,title:"Horror",fetchUrl:M.Z.fetchMoviesWithGenres+"27",setAllAboutMovie:d,setIsLoading:B,mediaType:"movie",isLarge:!e}),(0,m.jsx)(P,{component:U.Row,title:"Arabic Drama",fetchUrl:"/arabic/categories/1555594",isShofha:!0,setAllAboutMovie:d,setIsLoading:B,mediaType:"tv"}),(0,m.jsx)(P,{component:U.Row,title:"Drama",fetchUrl:M.Z.fetchMoviesWithGenres+"18",setAllAboutMovie:d,setIsLoading:B,mediaType:"movie",isLarge:!e}),(0,m.jsx)(P,{component:U.Row,title:"Comedy Movies",fetchUrl:M.Z.fetchMoviesWithGenres+"35",setAllAboutMovie:d,setIsLoading:B,mediaType:"movie",isLarge:!e}),(0,m.jsx)(P,{component:U.ShortsRow,title:"Romantic Arabic",fetchUrl:"/arabic/categories/1555590",catId:"1555590",isShofha:!0,setAllAboutMovie:d,setIsLoading:B,mediaType:"movie"})]}),(0,m.jsx)(P,{component:U.Under})]})}),(0,m.jsx)(n.AW,{path:"/all-about/:type/:id",element:(0,m.jsx)(P,{component:U.AllAbout,movie:t,watchList:f,setWatchList:L,watchListLen:j,setWatchListLen:A})}),(0,m.jsx)(n.AW,{path:"/ramadan-2024/:id?/:ep?",element:(0,m.jsx)(P,{component:U.RamadanPage})}),(0,m.jsx)(n.AW,{path:"/reels",element:(0,m.jsx)(P,{component:U.ReelsPage})}),(0,m.jsx)(n.AW,{path:"/privacy-policy",element:(0,m.jsx)(P,{component:U.PrivacyPolicy})}),"          ",(0,m.jsx)(n.AW,{path:"/profile",element:(0,m.jsx)(P,{component:e=>{const t=U.PrivateRoute,n=(0,a.lazy)((()=>Promise.all([s.e(539),s.e(916),s.e(131),s.e(561),s.e(719)]).then(s.bind(s,6933))));return(0,m.jsx)(a.Suspense,{fallback:(0,m.jsx)(S.Z,{}),children:(0,m.jsx)(t,{children:(0,m.jsx)(n,{...e})})})}})}),(0,m.jsx)(n.AW,{path:"/account",element:(0,m.jsx)(P,{component:e=>{const t=U.PrivateRoute,n=(0,a.lazy)((()=>Promise.all([s.e(539),s.e(916),s.e(131),s.e(561),s.e(719)]).then(s.bind(s,6933))));return(0,m.jsx)(a.Suspense,{fallback:(0,m.jsx)(S.Z,{}),children:(0,m.jsx)(t,{children:(0,m.jsx)(n,{...e})})})}})}),(0,m.jsx)(n.AW,{path:"/login",element:(0,m.jsx)(P,{component:U.Login})}),(0,m.jsx)(n.AW,{path:"/register",element:(0,m.jsx)(P,{component:U.Register})}),(0,m.jsx)(n.AW,{path:"/user/:sub",element:(0,m.jsx)(P,{component:U.UserProfilePage})}),(0,m.jsx)(n.AW,{path:"/profile/:uid",element:(0,m.jsx)(P,{component:U.UserProfilePage})}),(0,m.jsx)(n.AW,{path:"/tv/:id/season/:seasonNumber/episodes/:episodeId?",element:(0,m.jsx)(P,{component:U.SeasonEpisodesPage})}),(0,m.jsx)(n.AW,{path:"/tn/tv/:id",element:(0,m.jsx)(P,{component:U.SeasonEpisodesPage,tn:!0})}),(0,m.jsx)(n.AW,{path:"/discover/genre/:genreID/:genreName",element:(0,m.jsx)(P,{component:U.Discover})}),(0,m.jsx)(n.AW,{path:"/about-cast/:id/:credit_id",element:(0,m.jsx)(P,{component:U.AboutCast})}),(0,m.jsx)(n.AW,{path:"/search-page",element:(0,m.jsx)(P,{component:U.SearchPage,movies:p,setMovies:u})}),(0,m.jsx)(n.AW,{path:"/all-movies",element:(0,m.jsx)(P,{component:U.ALLMovies})}),(0,m.jsx)(n.AW,{path:"/watch-list",element:(0,m.jsx)(P,{component:e=>{const t=U.PrivateRoute,s=U.WatchList;return(0,m.jsx)(a.Suspense,{fallback:(0,m.jsx)(S.Z,{}),children:(0,m.jsxs)(t,{children:["                    ",(0,m.jsx)(s,{...e,watchList:f,setWatchList:L,watchListLen:j,setWatchListLen:A})]})})}})}),(0,m.jsx)(n.AW,{path:"/casts/:type/:id/:title",element:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(P,{component:U.CastsPage}),(0,m.jsx)(P,{component:U.Under})]})}),(0,m.jsx)(n.AW,{path:"/shorts/:catId/:id?",element:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(P,{component:U.ShortsPage}),(0,m.jsx)(P,{component:U.Under})]})})]})]})]})}const I=a.memo(N)},798:(e,t,s)=>{s.d(t,{Z:()=>c});var a=s(5662);const n=a.Z.create({baseURL:"/"}),o=new Map,i="function"===typeof a.Z.defaults.adapter?a.Z.defaults.adapter:null,r=async e=>{const t=(e.method||"get").toUpperCase(),s=e.baseURL||"",a=e.url||"";let n;if(s&&s.startsWith("http"))n=new URL(a,s);else if(a.startsWith("http"))n=new URL(a);else{const e="/"===s?window.location.origin:window.location.origin+s;n=new URL(a,e)}e.params&&Object.entries(e.params).forEach((e=>{let[t,s]=e;void 0!==s&&null!==s&&n.searchParams.append(t,s)}));const o=await fetch(n.toString(),{method:t,headers:e.headers,body:"GET"===t||"HEAD"===t?void 0:e.data});return{data:await o.clone().json().catch((()=>o.text().catch((()=>null)))),status:o.status,statusText:o.statusText,headers:{},config:e,request:o}};n.defaults.adapter=async e=>{const t=i||r,s="get"===(e.method||"get").toLowerCase(),a=e.headers&&e.headers["x-cache-bypass"];if(!s||a)return t(e);const n=(e=>{const{method:t="get",url:s="",baseURL:a="",params:n}=e;return[t.toLowerCase(),a,s,(o=n,o?"object"===typeof o?JSON.stringify(o,Object.keys(o).sort()):String(o):"")].join("|");var o})(e),c=Date.now(),l=o.get(n);if(l&&l.expires>c)return{...l.response,config:e};const h=await t(e);if(o.set(n,{response:h,expires:c+3e5}),o.size>100){const e=o.keys().next().value;o.delete(e)}return h};const c=n},5710:(e,t,s)=>{s.d(t,{B:()=>r});var a=s(7313),n=s(4850),o=s(3749),i=s(3283);function r(){const{currentUser:e}=(0,n.aC)(),[t,s]=(0,a.useState)([]),[r,c]=(0,a.useState)(0),[l,h]=(0,a.useState)(!0);(0,a.useEffect)((()=>{(async()=>{try{if(h(!0),e){const t=(0,o.JU)(i.db,"users",e.uid),a=await(0,o.QT)(t);if(a.exists()&&a.data().watchlist)s(a.data().watchlist),c(a.data().watchlist.length);else{const e=localStorage.getItem("watchlist");if(e){const a=JSON.parse(e);a.length>0&&(await(0,o.r7)(t,{watchlist:a}),s(a),c(a.length))}}}else{const e=localStorage.getItem("watchlist");if(e){const t=JSON.parse(e);s(t),c(t.length)}}}catch(t){console.error("Error initializing watchlist:",t)}finally{h(!1)}})()}),[e]);return{watchList:t,watchListLen:r,loading:l,addToWatchlist:async a=>{try{const{id:n,media_type:r,mediaType:l,name:h,title:d,poster_path:m}=a,p={movieId:n,mediaType:r||l||"movie",name:d||h,poster_path:m,dateAdded:(new Date).toISOString()};if(e){const t=(0,o.JU)(i.db,"users",e.uid);await(0,o.r7)(t,{watchlist:(0,o.vr)(p)}),s((e=>[...e,p])),c((e=>e+1))}else{const e=[...t,p];localStorage.setItem("watchlist",JSON.stringify(e)),s(e),c(e.length)}}catch(n){throw console.error("Error adding to watchlist:",n),n}},removeFromWatchlist:async(a,n)=>{try{if(e){const s=t.find((e=>e.movieId===a&&(e.mediaType===n||e.media_type===n)));if(s){const t=(0,o.JU)(i.db,"users",e.uid);await(0,o.r7)(t,{watchlist:(0,o.Ab)(s)})}}const r=t.filter((e=>!(e.movieId===a)));e||localStorage.setItem("watchlist",JSON.stringify(r)),s(r),c(r.length)}catch(r){throw console.error("Error removing from watchlist:",r),r}},isInWatchlist:e=>t.some((t=>t.movieId===e)),clearWatchlist:async()=>{try{if(e){const t=(0,o.JU)(i.db,"users",e.uid);await(0,o.r7)(t,{watchlist:[]})}localStorage.setItem("watchlist",JSON.stringify([])),s([]),c(0)}catch(t){throw console.error("Error clearing watchlist:",t),t}},setWatchList:s,setWatchListLen:c}}},2855:(e,t,s)=>{s.d(t,{Z:()=>a});const a={image_api:"https://image.tmdb.org/t/p/original",small_image_api:"https://image.tmdb.org/t/p/w500",fetchTrending:"/trending/",fetchNetflixOriginals:"/discover/netflix/",fetchMoviesWithGenres:"/discover/movie/",multiFetch:"/search/",apiKey:"20108f1c4ed38f7457c479849a9999cc"}},7452:(e,t,s)=>{s.d(t,{d:()=>a});const a=new(s(7387).yh)({isSearching:!1,loading:!0})}}]);