"use strict";(self.webpackChunkmoviea=self.webpackChunkmoviea||[]).push([[809],{6653:(e,l,i)=>{i.r(l),i.d(l,{default:()=>y});var s=i(7313),o=i(424),a=i(3283),d=i(4850),n=i(3749),t=i(1942),r=i(6367),c=i(2036),u=i(8002),v=i(1962),h=i(3258),m=i(8491),p=i(7211),x=i(2135),j=i(7864),w=i(2916),f=i(8821),g=i(2855),b=(i(8197),i(6417));function C(){var e,l;const{currentUser:i,logout:C}=(0,d.aC)(),y=(0,o.s0)(),k=(0,r.useMediaQuery)({query:"(max-width: 563px)"}),[N,S]=(0,s.useState)({}),[U,B]=(0,s.useState)([]),[L,T]=(0,s.useState)(!1),[R,H]=(0,s.useState)([]),[F,M]=(0,s.useState)(!1),[Z,I]=(0,s.useState)(!1),[J,P]=(0,s.useState)([]),[A,O]=(0,s.useState)(!1),[E,Q]=(0,s.useState)(""),[D,_]=(0,s.useState)(""),[z,W]=(0,s.useState)([]),[Y,K]=(0,s.useState)(""),[V,q]=(0,s.useState)([]),[G,$]=(0,s.useState)(!1),[X,ee]=(0,s.useState)(""),[le,ie]=(0,s.useState)(""),[se,oe]=(0,s.useState)("movie"),[ae,de]=(0,s.useState)(5),{data:ne}=(0,t.z)(g.Z.fetchTrending,(e=>[e.results[Math.floor(Math.random()*e.results.length)]]));(0,s.useEffect)((()=>{let e=()=>{},l=()=>{},s=()=>{};return i&&(e=te(),l=re(),s=ce()),()=>{e(),l(),s()}}),[i]);const te=(0,s.useCallback)((()=>null!==i&&void 0!==i&&i.uid?(0,n.cf)((0,n.IO)((0,n.hJ)(a.db,"users"),(0,n.ar)("uid","==",i.uid)),(e=>{var l;e.docs.length>0&&(S(e.docs[0].data()),Q((null===(l=e.docs[0].data())||void 0===l?void 0:l.bio)||""))})):()=>{}),[null===i||void 0===i?void 0:i.uid]),re=(0,s.useCallback)((()=>null!==i&&void 0!==i&&i.uid?(0,n.cf)((0,n.IO)((0,n.hJ)(a.db,"reviews"),(0,n.ar)("ref","==",i.uid)),(e=>W(e.docs.map((e=>({...e.data(),id:e.id})))))):()=>{}),[null===i||void 0===i?void 0:i.uid]),ce=(0,s.useCallback)((()=>(0,n.cf)((0,n.IO)((0,n.hJ)(a.db,"users"),(0,n.b9)(7)),(e=>{B(e.docs.map((e=>{var l;return(null===i||void 0===i?void 0:i.uid)!==(null===(l=e.data())||void 0===l?void 0:l.uid)?{...e.data(),id:e.id}:null})).filter(Boolean))}))),[null===i||void 0===i?void 0:i.uid]),ue=(0,s.useCallback)((async e=>{const l=(0,n.JU)(a.db,"users",e),i=await(0,n.QT)(l);H((e=>[...e,i.data()]))}),[]),ve=(0,s.useCallback)((async e=>{const l=(0,n.JU)(a.db,"users",e),i=await(0,n.QT)(l);P((e=>[...e,i.data()]))}),[]),he=(0,s.useCallback)((async()=>{var e;H([]),null!==N&&void 0!==N&&null!==(e=N.followList)&&void 0!==e&&e.length&&await Promise.all(N.followList.map(ue)),T((e=>!e))}),[null===N||void 0===N?void 0:N.followList,ue]),me=(0,s.useCallback)((async()=>{var e;P([]),null!==N&&void 0!==N&&null!==(e=N.followersList)&&void 0!==e&&e.length&&await Promise.all(N.followersList.map(ve)),I((e=>!e))}),[null===N||void 0===N?void 0:N.followersList,ve]),pe=(0,s.useCallback)((async()=>{var e;if(null===i||void 0===i||!i.uid)return;const l=(0,n.JU)(a.db,"users",i.uid),s=await(0,n.QT)(l);null!==(e=s.data())&&void 0!==e&&e.bio?await(0,n.r7)(l,{bio:E}):await(0,n.pl)(l,{...s.data(),bio:E}),O(!1),c.Am.success("Bio updated successfully!")}),[null===i||void 0===i?void 0:i.uid,E]),xe=(0,s.useCallback)((async e=>{const l=e.target.files[0],s=new FileReader;s.onloadend=async()=>{var e;if(_(s.result),null===i||void 0===i||!i.uid)return;const l=(0,n.JU)(a.db,"users",i.uid),o=await(0,n.QT)(l);null!==(e=o.data())&&void 0!==e&&e.profileBase64?await(0,n.r7)(l,{profileBase64:s.result}):await(0,n.pl)(l,{...o.data(),profileBase64:s.result}),c.Am.success("Profile picture updated!")},l&&s.readAsDataURL(l)}),[null===i||void 0===i?void 0:i.uid]),je=(0,s.useCallback)((async()=>{if(!Y.trim())return q([]),void $(!1);$(!0);const e=(0,n.IO)((0,n.hJ)(a.db,"users"),(0,n.b9)(10)),l=await(0,n.cf)(e,(e=>{const l=e.docs.map((e=>e.data())).filter((e=>{var l;return(null===(l=e.name)||void 0===l?void 0:l.toLowerCase().includes(Y.toLowerCase()))&&e.uid!==(null===i||void 0===i?void 0:i.uid)}));q(l)}));return l}),[Y,null===i||void 0===i?void 0:i.uid]);(0,s.useEffect)((()=>{let e,l;return Y?e=setTimeout((async()=>{l=await je()}),500):(q([]),$(!1)),()=>{clearTimeout(e),l&&l()}}),[Y,je]);const we=(0,s.useCallback)((async e=>{if(null===i||void 0===i||!i.uid||null===e||void 0===e||!e.uid)return;const l=(0,n.JU)(a.db,"users",i.uid),s=(0,n.JU)(a.db,"users",e.uid),o=await(0,n.QT)(l),d=await(0,n.QT)(s),t=o.data(),r=d.data();let u=(null===t||void 0===t?void 0:t.followList)||[];if(!u.includes(e.uid)){u.push(e.uid),await(0,n.r7)(l,{followList:u});const o=(null===r||void 0===r?void 0:r.followersList)||[];o.includes(i.uid)||(o.push(i.uid),await(0,n.r7)(s,{followersList:o})),c.Am.success("You are now following ".concat(e.name))}}),[null===i||void 0===i?void 0:i.uid]),fe=(0,s.useCallback)((async e=>{if(null===i||void 0===i||!i.uid||null===e||void 0===e||!e.uid)return;const l=(0,n.JU)(a.db,"users",i.uid),s=(0,n.JU)(a.db,"users",e.uid),o=await(0,n.QT)(l),d=await(0,n.QT)(s),t=o.data(),r=d.data();let u=(null===t||void 0===t?void 0:t.followList)||[];if(u.includes(e.uid)){u=u.filter((l=>l!==e.uid)),await(0,n.r7)(l,{followList:u});let o=(null===r||void 0===r?void 0:r.followersList)||[];o=o.filter((e=>e!==i.uid)),await(0,n.r7)(s,{followersList:o}),c.Am.success("You unfollowed ".concat(e.name))}}),[null===i||void 0===i?void 0:i.uid]),ge=(0,s.useCallback)((async()=>{if(X&&le)try{await(0,n.ET)((0,n.hJ)(a.db,"reviews"),{content:X,title:le,rating:ae,type:se,ref:i.uid,name:i.displayName,picture:i.photoURL,timestamp:(0,n.Bt)()}),M(!1),ee(""),ie(""),de(5),c.Am.success("Review posted successfully!")}catch(e){c.Am.error("Error creating review: "+e.message)}else c.Am.error("Please fill all the fields")}),[X,le,ae,se,i]),be=(0,s.useMemo)((()=>{var e,l,i,s,o;return(0,b.jsx)("div",{className:"accountHeader",children:(0,b.jsxs)(x.rU,{to:"/all-about/".concat(null===ne||void 0===ne||null===(e=ne[0])||void 0===e?void 0:e.media_type,"/").concat(null===ne||void 0===ne||null===(l=ne[0])||void 0===l?void 0:l.id),children:[(0,b.jsxs)("div",{className:"imageHolderAcc",children:[(0,b.jsx)(u.Z,{src:g.Z.image_api+(null===ne||void 0===ne||null===(i=ne[0])||void 0===i?void 0:i.backdrop_path),className:"accountHeaderImage",alt:"cover"}),(0,b.jsx)(j.Wxs,{className:"playIcon"})]}),(0,b.jsx)("span",{className:"movieCoverTitle",children:(null===ne||void 0===ne||null===(s=ne[0])||void 0===s?void 0:s.title)||(null===ne||void 0===ne||null===(o=ne[0])||void 0===o?void 0:o.name)})]})})}),[ne]);return i?(0,b.jsxs)("div",{className:"Account",children:[(0,b.jsx)(c.Ix,{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark"}),be,(0,b.jsxs)("div",{className:"profileInfosHolder",children:[(0,b.jsxs)("div",{className:"GlobalInfoHolder",children:[(0,b.jsx)("img",{src:(null===N||void 0===N?void 0:N.profileBase64)||(null===i||void 0===i?void 0:i.photoURL)||"https://via.placeholder.com/130",alt:(null===N||void 0===N?void 0:N.name)||(null===i||void 0===i?void 0:i.displayName)||"User",onClick:()=>document.getElementById("upload-image").click()}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{children:(null===N||void 0===N?void 0:N.name)||(null===i||void 0===i?void 0:i.displayName)||"User"}),(0,b.jsx)("h2",{children:"Movie enthusiast"})]}),(0,b.jsx)("input",{type:"file",id:"upload-image",accept:"image/*",onChange:xe,style:{display:"none"}})]}),k?(0,b.jsxs)("div",{className:"smallScreenInfoHolder",children:[(0,b.jsxs)("span",{className:"followingBtn",onClick:he,children:[(null===N||void 0===N||null===(e=N.followList)||void 0===e?void 0:e.length)||0,(0,b.jsx)("br",{}),"Following"]}),(0,b.jsxs)("span",{className:"followingBtn",onClick:me,children:[(null===N||void 0===N||null===(l=N.followersList)||void 0===l?void 0:l.length)||0,(0,b.jsx)("br",{}),"Followers"]}),(0,b.jsxs)("span",{children:[z.length,(0,b.jsx)("br",{}),"Reviews"]})]}):(0,b.jsxs)("button",{className:"createRevButton",onClick:()=>M(!0),children:[(0,b.jsx)(f.Kix,{})," Create Review"]})]}),(0,b.jsxs)("div",{className:"downSection",children:[(0,b.jsxs)("div",{className:"sideSection",children:["          ",(0,b.jsxs)("div",{className:"bioHolder",children:[(0,b.jsx)("h1",{children:"Bio"}),A?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("textarea",{value:E,onChange:e=>Q(e.target.value),placeholder:"Write your bio here...",maxLength:150,className:"bioTextEdit"}),(0,b.jsxs)("div",{className:"bioButtonsHolder",children:[(0,b.jsx)("button",{onClick:pe,className:"saveBioBtn",children:"Save"}),(0,b.jsx)("button",{onClick:()=>O(!1),className:"cancelBioBtn",children:"Cancel"})]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{children:(null===N||void 0===N?void 0:N.bio)||"No bio yet."}),(0,b.jsxs)("button",{onClick:()=>O(!0),children:[(0,b.jsx)(w.vPQ,{})," Edit Bio"]})]})]}),(0,b.jsxs)("div",{className:"searchFriendsHolder",children:[(0,b.jsxs)("div",{className:"searchFrinedsBar",children:[(0,b.jsx)("input",{type:"text",placeholder:"Search users...",value:Y,onChange:e=>K(e.target.value)}),(0,b.jsx)("img",{src:v.Z,alt:"search"})]}),(0,b.jsx)("div",{className:"setSuggestedUsersHolder",children:G&&Y?V.length>0?V.map((e=>{var l;return(0,b.jsx)(h.Z,{user:e,onFollow:()=>we(e),isFollowing:null===N||void 0===N||null===(l=N.followList)||void 0===l?void 0:l.includes(e.uid),onUnfollow:()=>fe(e)},e.uid)})):(0,b.jsx)("span",{className:"noUsersSpan",children:"No users found"}):U.map((e=>{var l;return(0,b.jsx)(h.Z,{user:e,onFollow:()=>we(e),isFollowing:null===N||void 0===N||null===(l=N.followList)||void 0===l?void 0:l.includes(e.uid),onUnfollow:()=>fe(e)},e.uid)}))})]})]}),(0,b.jsxs)("div",{className:"reviewSection",children:["          ",k&&(0,b.jsxs)("div",{className:"createReviewUiButton",onClick:()=>M(!0),children:[(0,b.jsx)("h1",{children:"Create Review"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("img",{src:(null===N||void 0===N?void 0:N.profileBase64)||(null===i||void 0===i?void 0:i.photoURL)||"https://via.placeholder.com/45",alt:(null===N||void 0===N?void 0:N.name)||(null===i||void 0===i?void 0:i.displayName)||"User"}),(0,b.jsx)("input",{type:"text",placeholder:"Write a review...",readOnly:!0})]}),(0,b.jsx)("span",{children:"Click to create a review"})]}),(0,b.jsxs)("div",{className:"reviewsHolder",children:[(0,b.jsx)("h1",{children:"Your Reviews"}),(0,b.jsx)("div",{className:"reviewsContainer",children:z.length>0?z.sort(((e,l)=>{var i,s;return(null===(i=l.timestamp)||void 0===i?void 0:i.seconds)-(null===(s=e.timestamp)||void 0===s?void 0:s.seconds)})).map((e=>(0,b.jsx)(m.Z,{review:e,currentUser:i,level:"owner"},e.id))):(0,b.jsx)("div",{className:"noReviewHolder",children:(0,b.jsxs)("p",{children:["You haven't created any reviews yet. ",(0,b.jsx)("span",{onClick:()=>M(!0),children:"Create your first review!"})]})})})]})]})]}),L&&(0,b.jsx)(p.Z,{sx:{color:"#fff",zIndex:1e3},open:L,onClick:()=>T(!1),children:(0,b.jsxs)("div",{className:"followingListHolder",onClick:e=>e.stopPropagation(),children:[(0,b.jsx)("h1",{children:"Following"}),R.length>0?R.map((e=>(0,b.jsxs)("div",{children:[(0,b.jsxs)("span",{children:[(0,b.jsx)("img",{src:e.profileBase64||e.picture||"https://via.placeholder.com/40",alt:e.name||"User"}),e.name||"User"]}),(0,b.jsx)("a",{onClick:()=>fe(e),children:"Unfollow"})]},e.uid))):(0,b.jsx)("p",{children:"Not following anyone yet"})]})}),Z&&(0,b.jsx)(p.Z,{sx:{color:"#fff",zIndex:1e3},open:Z,onClick:()=>I(!1),children:(0,b.jsxs)("div",{className:"followingListHolder",onClick:e=>e.stopPropagation(),children:[(0,b.jsx)("h1",{children:"Followers"}),J.length>0?J.map((e=>{var l;return(0,b.jsxs)("div",{children:[(0,b.jsxs)("span",{children:[(0,b.jsx)("img",{src:e.profileBase64||e.picture||"https://via.placeholder.com/40",alt:e.name||"User"}),e.name||"User"]}),null!==N&&void 0!==N&&null!==(l=N.followList)&&void 0!==l&&l.includes(e.uid)?(0,b.jsx)("a",{onClick:()=>fe(e),children:"Unfollow"}):(0,b.jsx)("a",{onClick:()=>we(e),children:"Follow"})]},e.uid)})):(0,b.jsx)("p",{children:"No followers yet"})]})}),F&&(0,b.jsx)(p.Z,{sx:{color:"#fff",zIndex:1e3},open:F,onClick:()=>M(!1),children:(0,b.jsxs)("div",{className:"createReview",onClick:e=>e.stopPropagation(),children:[(0,b.jsxs)("div",{className:"createReviewHeader",children:[(0,b.jsx)("img",{src:(null===N||void 0===N?void 0:N.profileBase64)||(null===i||void 0===i?void 0:i.photoURL)||"https://via.placeholder.com/50",alt:"user"}),(0,b.jsx)("input",{type:"text",placeholder:"Title of movie or TV show",value:le,onChange:e=>ie(e.target.value)})]}),(0,b.jsx)("div",{className:"ReviewSteps",children:(0,b.jsxs)("div",{className:"mediaTypeSelectHolder",children:[(0,b.jsx)("h3",{children:"What are you reviewing?"}),(0,b.jsxs)("div",{className:"mediaTypeButtonsHolder",children:[(0,b.jsx)("button",{className:"mediaTypebtn ".concat("movie"===se?"backgroundMain":""),onClick:()=>oe("movie"),children:"Movie"}),(0,b.jsx)("button",{className:"mediaTypebtn ".concat("tv"===se?"backgroundMain":""),onClick:()=>oe("tv"),children:"TV Show"})]})]})}),(0,b.jsx)("div",{className:"ReviewSteps",children:(0,b.jsxs)("div",{className:"ratingSelector",children:[(0,b.jsxs)("h3",{children:["Your Rating: ",ae,"/10"]}),(0,b.jsx)("input",{type:"range",min:"1",max:"10",value:ae,onChange:e=>de(Number(e.target.value)),style:{width:"100%"}})]})}),(0,b.jsx)("div",{className:"ReviewSteps",children:(0,b.jsx)("textarea",{placeholder:"Write your review here...",value:X,onChange:e=>ee(e.target.value),style:{width:"100%",height:"120px",padding:"10px",borderRadius:"7px",border:"none",resize:"none"}})}),(0,b.jsxs)("div",{className:"ReviewButtonHolder",children:[(0,b.jsx)("button",{onClick:()=>M(!1),children:"Cancel"}),(0,b.jsx)("button",{onClick:ge,children:"Post Review"})]})]})})]}):(y("/"),null)}const y=s.memo(C)},8002:(e,l,i)=>{i.d(l,{Z:()=>a});var s=i(7313),o=i(6417);const a=function(e){const[l,i]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{let l=!0;i(!1);const s=new Image;return s.onload=()=>{l&&i(!0)},s.src=e.src,()=>{l=!1,s.onload=null}}),[e.src]),(0,o.jsxs)(o.Fragment,{children:[!l&&(0,o.jsx)("div",{className:"skeleton-box"}),l&&(0,o.jsx)("img",{src:e.src,...e})]})}},9625:(e,l,i)=>{i.d(l,{Z:()=>a});var s=i(7313),o=i(6417);const a=function(e){let{text:l,max:i}=e;const[a,d]=(0,s.useState)(!1);return(0,o.jsxs)("p",{className:"reviewText",children:[a?l:null===l||void 0===l?void 0:l.substring(0,i)," ",(null===l||void 0===l?void 0:l.length)>=i&&(0,o.jsx)("span",{onClick:()=>d(!a),className:"showMoreBtn",children:a?"See less":"... See more"})]})}},8491:(e,l,i)=>{i.d(l,{Z:()=>v});var s=i(7313),o=i(2855),a=i(2135),d=i(9625),n=i(2539),t=i(3749),r=i(3283),c=i(2036),u=i(6417);const v=function(e){var l,i,v,h,m,p,x,j,w,f;let{review:g,user:b,level:C,currentUser:y}=e;const k=b||y||{name:null===g||void 0===g?void 0:g.name,picture:null===g||void 0===g?void 0:g.picture,profileBase64:null},[N,S]=(0,s.useState)(!1);return(0,u.jsxs)("div",{className:"Review",children:[N&&(0,u.jsxs)("div",{className:"optionsHolder",children:[(0,u.jsxs)("div",{onClick:()=>{S(!1)},children:[(0,u.jsx)(n.U$P,{})," Edit Review"]}),(0,u.jsxs)("div",{onClick:()=>{(async()=>{S(!1),await(0,t.oe)((0,t.JU)(r.db,"reviews",g.id)),c.Am.success("Review Deleted \ud83d\ude0a !",{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"})})()},children:[(0,u.jsx)(n.ZkW,{})," Delete Review"]}),(0,u.jsxs)("div",{onClick:()=>{S(!1)},children:[(0,u.jsx)(n.KQY,{})," Share Review"]})]}),(0,u.jsxs)("div",{className:"ReviewHeader",children:[(0,u.jsxs)("span",{children:[(0,u.jsx)("img",{src:(null===k||void 0===k?void 0:k.profileBase64)||(null===k||void 0===k?void 0:k.picture)||"https://via.placeholder.com/40",alt:(null===k||void 0===k?void 0:k.name)||"User"}),(0,u.jsxs)("span",{children:[(0,u.jsx)("h1",{children:null!==k&&void 0!==k&&null!==(l=k.name)&&void 0!==l&&l.includes("@")?null===k||void 0===k?void 0:k.nickname:(null===k||void 0===k?void 0:k.name)||"Anonymous"}),(0,u.jsx)("h2",{children:(new Date).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})==(null===g||void 0===g?void 0:g.date)?"Today, "+(null===g||void 0===g?void 0:g.time):null===g||void 0===g||null===(i=g.date)||void 0===i?void 0:i.slice((null===g||void 0===g||null===(v=g.date)||void 0===v?void 0:v.indexOf(","))+1)})]})]}),"user"!==C&&(0,u.jsxs)("div",{className:"optionsBtn",onClick:()=>S(!N),children:[(0,u.jsx)("span",{}),!N&&(0,u.jsx)("span",{}),(0,u.jsx)("span",{})]}),"user"===C&&(0,u.jsxs)("div",{className:"optionsBtn",children:[(0,u.jsx)("span",{}),(0,u.jsx)("span",{}),(0,u.jsx)("span",{})]})]}),(0,u.jsx)(d.Z,{text:(null===g||void 0===g?void 0:g.reviewText)||(null===g||void 0===g?void 0:g.content),max:80}),(null===g||void 0===g||null===(h=g.selectedMedia)||void 0===h?void 0:h.backdrop_path)&&(0,u.jsx)("img",{src:o.Z.image_api+g.selectedMedia.backdrop_path,className:"mediaImage",alt:(null===g||void 0===g||null===(m=g.selectedMedia)||void 0===m?void 0:m.title)||(null===g||void 0===g||null===(p=g.selectedMedia)||void 0===p?void 0:p.name)||"Media"}),(0,u.jsxs)("div",{className:"mediaInfoHolder",children:[(0,u.jsxs)("span",{children:["movie"===(null===g||void 0===g?void 0:g.mediaType)?null===g||void 0===g||null===(x=g.selectedMedia)||void 0===x?void 0:x.title:(null===g||void 0===g||null===(j=g.selectedSeason)||void 0===j?void 0:j.name)||(null===g||void 0===g||null===(w=g.selectedMedia)||void 0===w?void 0:w.original_name)||(null===g||void 0===g?void 0:g.title),(null===g||void 0===g?void 0:g.mediaType)&&" (".concat(g.mediaType,")"),!(null!==g&&void 0!==g&&g.mediaType)&&(null===g||void 0===g?void 0:g.type)&&" (".concat(g.type,")")]}),(null===g||void 0===g?void 0:g.mediaType)&&(null===g||void 0===g||null===(f=g.selectedMedia)||void 0===f?void 0:f.id)&&(0,u.jsx)(a.rU,{to:"/all-about/".concat(g.mediaType,"/").concat(g.selectedMedia.id),children:"watch now"})]})]})}},3258:(e,l,i)=>{i.d(l,{Z:()=>a});var s=i(2135),o=(i(7313),i(6417));const a=function(e){var l;let{user:i,onFollow:a,onUnfollow:d,isFollowing:n}=e;const t=(null===i||void 0===i?void 0:i.uid)||(null===i||void 0===i?void 0:i.sub),r=(null===i||void 0===i?void 0:i.displayName)||(null===i||void 0===i?void 0:i.name)||(null===i||void 0===i||null===(l=i.email)||void 0===l?void 0:l.split("@")[0]),c=(null===i||void 0===i?void 0:i.photoURL)||(null===i||void 0===i?void 0:i.profileBase64)||(null===i||void 0===i?void 0:i.picture)||"https://via.placeholder.com/150";return(0,o.jsxs)("div",{className:"userCard",children:[(0,o.jsx)("img",{src:c,alt:r||"User"}),(0,o.jsx)("span",{children:null!==r&&void 0!==r&&r.includes("@")?(null===i||void 0===i?void 0:i.nickname)||(null===r||void 0===r?void 0:r.split("@")[0]):r}),n?(0,o.jsx)("a",{onClick:d,children:"Unfollow"}):(0,o.jsx)("a",{onClick:a,children:"Follow"}),(0,o.jsx)(s.rU,{to:"/user/".concat(t),children:"Profile"})]})}},1942:(e,l,i)=>{i.d(l,{z:()=>d});var s=i(7313),o=i(798);const a=new Map,d=(e,l)=>{const[i,d]=(0,s.useState)(null),[n,t]=(0,s.useState)(!0),[r,c]=(0,s.useState)(null),u=(0,s.useCallback)((async()=>{try{t(!0);const i=a.get(e);if(i&&Date.now()-i.timestamp<3e5)return d(i.data),void t(!1);const s=await o.Z.get(e),n=l?l(s.data):s.data;a.set(e,{data:n,timestamp:Date.now()}),d(n),c(null)}catch(i){c(i),console.error("Error fetching data:",i)}finally{t(!1)}}),[e,l]);(0,s.useEffect)((()=>{u()}),[u]);return{data:i,loading:n,error:r,refetch:(0,s.useCallback)((()=>{a.delete(e),u()}),[u,e])}}},8197:()=>{}}]);