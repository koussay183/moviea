"use strict";(self.webpackChunkmoviea=self.webpackChunkmoviea||[]).push([[273],{8002:(l,e,i)=>{i.d(e,{Z:()=>d});var s=i(7313),o=i(6417);const d=function(l){const[e,i]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{let e=!0;i(!1);const s=new Image;return s.onload=()=>{e&&i(!0)},s.src=l.src,()=>{e=!1,s.onload=null}}),[l.src]),(0,o.jsxs)(o.Fragment,{children:[!e&&(0,o.jsx)("div",{className:"skeleton-box"}),e&&(0,o.jsx)("img",{src:l.src,...l})]})}},9625:(l,e,i)=>{i.d(e,{Z:()=>d});var s=i(7313),o=i(6417);const d=function(l){let{text:e,max:i}=l;const[d,n]=(0,s.useState)(!1);return(0,o.jsxs)("p",{className:"reviewText",children:[d?e:null===e||void 0===e?void 0:e.substring(0,i)," ",(null===e||void 0===e?void 0:e.length)>=i&&(0,o.jsx)("span",{onClick:()=>n(!d),className:"showMoreBtn",children:d?"See less":"... See more"})]})}},8491:(l,e,i)=>{i.d(e,{Z:()=>u});var s=i(7313),o=i(2855),d=i(2135),n=i(9625),a=i(2539),v=i(3749),c=i(3283),r=i(2036),t=i(6417);const u=function(l){var e,i,u,h,m,x,p,j,f,w;let{review:g,user:y,level:b,currentUser:N}=l;const k=y||N||{name:null===g||void 0===g?void 0:g.name,picture:null===g||void 0===g?void 0:g.picture,profileBase64:null},[U,L]=(0,s.useState)(!1);return(0,t.jsxs)("div",{className:"Review",children:[U&&(0,t.jsxs)("div",{className:"optionsHolder",children:[(0,t.jsxs)("div",{onClick:()=>{L(!1)},children:[(0,t.jsx)(a.U$P,{})," Edit Review"]}),(0,t.jsxs)("div",{onClick:()=>{(async()=>{L(!1),await(0,v.oe)((0,v.JU)(c.db,"reviews",g.id)),r.Am.success("Review Deleted \ud83d\ude0a !",{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"})})()},children:[(0,t.jsx)(a.ZkW,{})," Delete Review"]}),(0,t.jsxs)("div",{onClick:()=>{L(!1)},children:[(0,t.jsx)(a.KQY,{})," Share Review"]})]}),(0,t.jsxs)("div",{className:"ReviewHeader",children:[(0,t.jsxs)("span",{children:[(0,t.jsx)("img",{src:(null===k||void 0===k?void 0:k.profileBase64)||(null===k||void 0===k?void 0:k.picture)||"https://via.placeholder.com/40",alt:(null===k||void 0===k?void 0:k.name)||"User"}),(0,t.jsxs)("span",{children:[(0,t.jsx)("h1",{children:null!==k&&void 0!==k&&null!==(e=k.name)&&void 0!==e&&e.includes("@")?null===k||void 0===k?void 0:k.nickname:(null===k||void 0===k?void 0:k.name)||"Anonymous"}),(0,t.jsx)("h2",{children:(new Date).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})==(null===g||void 0===g?void 0:g.date)?"Today, "+(null===g||void 0===g?void 0:g.time):null===g||void 0===g||null===(i=g.date)||void 0===i?void 0:i.slice((null===g||void 0===g||null===(u=g.date)||void 0===u?void 0:u.indexOf(","))+1)})]})]}),"user"!==b&&(0,t.jsxs)("div",{className:"optionsBtn",onClick:()=>L(!U),children:[(0,t.jsx)("span",{}),!U&&(0,t.jsx)("span",{}),(0,t.jsx)("span",{})]}),"user"===b&&(0,t.jsxs)("div",{className:"optionsBtn",children:[(0,t.jsx)("span",{}),(0,t.jsx)("span",{}),(0,t.jsx)("span",{})]})]}),(0,t.jsx)(n.Z,{text:(null===g||void 0===g?void 0:g.reviewText)||(null===g||void 0===g?void 0:g.content),max:80}),(null===g||void 0===g||null===(h=g.selectedMedia)||void 0===h?void 0:h.backdrop_path)&&(0,t.jsx)("img",{src:o.Z.image_api+g.selectedMedia.backdrop_path,className:"mediaImage",alt:(null===g||void 0===g||null===(m=g.selectedMedia)||void 0===m?void 0:m.title)||(null===g||void 0===g||null===(x=g.selectedMedia)||void 0===x?void 0:x.name)||"Media"}),(0,t.jsxs)("div",{className:"mediaInfoHolder",children:[(0,t.jsxs)("span",{children:["movie"===(null===g||void 0===g?void 0:g.mediaType)?null===g||void 0===g||null===(p=g.selectedMedia)||void 0===p?void 0:p.title:(null===g||void 0===g||null===(j=g.selectedSeason)||void 0===j?void 0:j.name)||(null===g||void 0===g||null===(f=g.selectedMedia)||void 0===f?void 0:f.original_name)||(null===g||void 0===g?void 0:g.title),(null===g||void 0===g?void 0:g.mediaType)&&" (".concat(g.mediaType,")"),!(null!==g&&void 0!==g&&g.mediaType)&&(null===g||void 0===g?void 0:g.type)&&" (".concat(g.type,")")]}),(null===g||void 0===g?void 0:g.mediaType)&&(null===g||void 0===g||null===(w=g.selectedMedia)||void 0===w?void 0:w.id)&&(0,t.jsx)(d.rU,{to:"/all-about/".concat(g.mediaType,"/").concat(g.selectedMedia.id),children:"watch now"})]})]})}},4447:(l,e,i)=>{i.r(e),i.d(e,{default:()=>j});var s=i(7313),o=i(424),d=i(3283),n=i(3749),a=i(8002),v=i(2855),c=i(798),r=i(8491),t=i(7864),u=i(4850),h=i(6367),m=i(7211),x=i(2135),p=i(6417);const j=function(){var l,e,i,j,f,w,g,y,b,N,k;const{sub:U}=(0,o.UO)(),L=U?decodeURIComponent(U):U,[C,S]=(0,s.useState)({}),[H,T]=(0,s.useState)([]),[I,M]=(0,s.useState)({}),[R,Z]=(0,s.useState)({}),{currentUser:B,loginWithGoogle:J}=(0,u.aC)(),W=(0,o.s0)();(0,s.useEffect)((()=>{D([]),G([]);(async()=>{const l=await c.Z.get(v.Z.fetchTrending);M({...l.data.results[Math.floor(Math.random()*l.data.results.length)]})})(),(async()=>{(0,n.cf)((0,n.IO)((0,n.hJ)(d.db,"users")),(l=>{l.docs.forEach((l=>{const e=l.data();console.log("User doc ID:",l.id,"User data uid:",e.uid,"User data sub:",e.sub)}))})),(0,n.cf)((0,n.IO)((0,n.hJ)(d.db,"users"),(0,n.ar)("uid","==",L)),(l=>{l.docs.length>0?l.docs.forEach((l=>{const e=l.data();S(e)})):(console.log("UserProfilePage - No user found with uid:",L),(0,n.cf)((0,n.IO)((0,n.hJ)(d.db,"users"),(0,n.ar)("sub","==",L)),(l=>{l.docs.length>0?l.docs.forEach((l=>{const e=l.data();S(e)})):console.log("UserProfilePage - No user found with sub either:",L)})))})),(0,n.cf)((0,n.IO)((0,n.hJ)(d.db,"reviews"),(0,n.ar)("ref","==",L)),(l=>{const e=l.docs.map((l=>({...l.data(),id:l.id})));T(e)}))})(),(async()=>{B&&(0,n.cf)((0,n.JU)(d.db,"users",null===B||void 0===B?void 0:B.uid),(l=>{Z(l.data())}))})()}),[L,B]);const E=async()=>{if(B&&L)try{const l=(0,n.JU)(d.db,"users",B.uid);await(0,n.pl)(l,{followList:(0,n.vr)((null===C||void 0===C?void 0:C.sub)||L)},{merge:!0});const e=(0,n.JU)(d.db,"users",L);await(0,n.pl)(e,{followersList:(0,n.vr)(B.uid)},{merge:!0})}catch(l){console.error("Error following user:",l)}else J()},P=async()=>{if(B&&L)try{const l=(0,n.JU)(d.db,"users",B.uid),e=(0,n.JU)(d.db,"users",L);await(0,n.pl)(l,{followList:(0,n.Ab)((null===C||void 0===C?void 0:C.sub)||L)},{merge:!0}),await(0,n.pl)(e,{followersList:(0,n.Ab)(B.uid)},{merge:!0})}catch(l){console.error("Error unfollowing user:",l)}},[O,_]=(0,s.useState)(!1),[A,D]=(0,s.useState)([]),[Q,Y]=(0,s.useState)(!1),[z,G]=(0,s.useState)([]),q=(0,h.useMediaQuery)({query:"(max-width: 563px)"}),F=async()=>{var l;z.length||(null===C||void 0===C||null===(l=C.followList)||void 0===l||l.map((l=>(async l=>{const e=(0,n.JU)(d.db,"users",l);(0,n.QT)(e).then((l=>G((e=>[...e,l.data()]))))})(l))));Y(!Q)},K=async()=>{var l;A.length||(null===C||void 0===C||null===(l=C.followersList)||void 0===l||l.map((l=>(async l=>{const e=(0,n.JU)(d.db,"users",l);(0,n.QT)(e).then((l=>D((e=>[...e,l.data()]))))})(l))));_(!O)};return B&&L===B.uid?(W("/profile"),null):(0,p.jsxs)("div",{className:"UserProfilePage",children:[(0,p.jsx)(m.Z,{open:Q,style:{zIndex:99,padding:"1em"},onClick:()=>Y(!Q),children:(0,p.jsxs)("div",{className:"followingListHolder",children:["            ",(0,p.jsx)("h1",{children:"following"}),null===z||void 0===z?void 0:z.map(((l,e)=>{var i,s;return(0,p.jsxs)("div",{children:[(0,p.jsxs)("span",{children:[(0,p.jsx)("img",{src:(null===l||void 0===l?void 0:l.photoURL)||(null===l||void 0===l?void 0:l.picture),alt:(null===l||void 0===l?void 0:l.displayName)||(null===l||void 0===l?void 0:l.name)}),null!==(i=(null===l||void 0===l?void 0:l.displayName)||(null===l||void 0===l?void 0:l.name))&&void 0!==i&&i.includes("@")?null===l||void 0===l||null===(s=l.email)||void 0===s?void 0:s.split("@")[0]:(null===l||void 0===l?void 0:l.displayName)||(null===l||void 0===l?void 0:l.name)]}),(0,p.jsx)(x.rU,{to:"/user/".concat((null===l||void 0===l?void 0:l.uid)||(null===l||void 0===l?void 0:l.sub)),children:"view"})]},"following-".concat(e))})),!(null!==z&&void 0!==z&&z.length)&&"no following yet"]})}),(0,p.jsx)(m.Z,{open:O,style:{zIndex:99,padding:"1em"},onClick:()=>_(!O),children:(0,p.jsxs)("div",{className:"followingListHolder",children:["            ",(0,p.jsx)("h1",{children:"followers"}),null===A||void 0===A?void 0:A.map(((l,e)=>{var i,s;return(0,p.jsxs)("div",{children:[(0,p.jsxs)("span",{children:[(0,p.jsx)("img",{src:(null===l||void 0===l?void 0:l.photoURL)||(null===l||void 0===l?void 0:l.picture),alt:(null===l||void 0===l?void 0:l.displayName)||(null===l||void 0===l?void 0:l.name)}),null!==(i=(null===l||void 0===l?void 0:l.displayName)||(null===l||void 0===l?void 0:l.name))&&void 0!==i&&i.includes("@")?null===l||void 0===l||null===(s=l.email)||void 0===s?void 0:s.split("@")[0]:(null===l||void 0===l?void 0:l.displayName)||(null===l||void 0===l?void 0:l.name)]}),(0,p.jsx)(x.rU,{to:"/user/".concat((null===l||void 0===l?void 0:l.uid)||(null===l||void 0===l?void 0:l.sub)),children:"view"})]},"follower-".concat(e))})),!(null!==A&&void 0!==A&&A.length)&&"no followers yet"]})}),(0,p.jsxs)("div",{className:"accountHeader",children:[(0,p.jsx)("div",{className:"imageHolderAcc",children:(0,p.jsx)(a.Z,{src:v.Z.image_api+(null===I||void 0===I?void 0:I.backdrop_path),className:"accountHeaderImage",alt:"cover"})}),(0,p.jsx)("span",{className:"movieCoverTitle",children:(null===I||void 0===I?void 0:I.title)||(null===I||void 0===I?void 0:I.name)}),(0,p.jsxs)("div",{className:"profileInfosHolder",children:[(0,p.jsxs)("div",{className:"GlobalInfoHolder",children:[(0,p.jsx)("img",{src:(null===C||void 0===C?void 0:C.profileBase64)||C.picture,alt:null===C||void 0===C?void 0:C.name}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h1",{children:null!==C&&void 0!==C&&null!==(l=C.name)&&void 0!==l&&l.includes("@")?null===C||void 0===C?void 0:C.nickname:null===C||void 0===C?void 0:C.name}),q&&(0,p.jsxs)("div",{className:"loveBtn",onClick:()=>{var l;return null!==R&&void 0!==R&&null!==(l=R.followList)&&void 0!==l&&l.includes(null===C||void 0===C?void 0:C.sub)?P():E()},children:[!(null!==R&&void 0!==R&&null!==(e=R.followList)&&void 0!==e&&e.includes(null===C||void 0===C?void 0:C.sub))&&(0,p.jsxs)("span",{children:[(0,p.jsx)(t.lo,{})," follow"]}),(null===R||void 0===R||null===(i=R.followList)||void 0===i?void 0:i.includes(null===C||void 0===C?void 0:C.sub))&&(0,p.jsxs)("span",{children:[(0,p.jsx)(t.M_L,{})," followed"]})]}),!q&&(0,p.jsxs)("h2",{children:[H.length," Reviews . ",(0,p.jsxs)("span",{className:"followingBtn",onClick:()=>K(),children:[(null===C||void 0===C||null===(j=C.followersList)||void 0===j?void 0:j.length)||"0"," follower"]})," . ",(0,p.jsxs)("span",{onClick:()=>F(),className:"followingBtn",children:[(null===C||void 0===C||null===(f=C.followList)||void 0===f?void 0:f.length)||"0"," following"]})," "]})]})]}),!q&&(0,p.jsxs)("div",{className:"loveBtn",onClick:()=>{var l;return null!==R&&void 0!==R&&null!==(l=R.followList)&&void 0!==l&&l.includes(null===C||void 0===C?void 0:C.sub)?P():E()},children:[!(null!==R&&void 0!==R&&null!==(w=R.followList)&&void 0!==w&&w.includes(null===C||void 0===C?void 0:C.sub))&&(0,p.jsxs)("span",{children:[(0,p.jsx)(t.lo,{})," follow"]}),(null===R||void 0===R||null===(g=R.followList)||void 0===g?void 0:g.includes(null===C||void 0===C?void 0:C.sub))&&(0,p.jsxs)("span",{children:[(0,p.jsx)(t.M_L,{})," followed"]})]})]}),q&&(0,p.jsxs)("div",{className:"smallScreenInfoHolder",children:[(0,p.jsxs)("span",{children:[(0,p.jsxs)("span",{children:[H.length," "]}),(0,p.jsx)("span",{children:"Reviews"})]}),(0,p.jsxs)("span",{onClick:()=>K(),children:[(0,p.jsx)("span",{children:(null===C||void 0===C||null===(y=C.followersList)||void 0===y?void 0:y.length)||"0"}),(0,p.jsx)("span",{children:"follower"})]}),(0,p.jsxs)("span",{onClick:()=>F(),children:[(0,p.jsx)("span",{children:(null===C||void 0===C||null===(b=C.followList)||void 0===b?void 0:b.length)||"0"}),(0,p.jsx)("span",{children:"following"})]})]})]}),(0,p.jsxs)("div",{className:"downSection",children:[(0,p.jsx)("div",{className:"sideSection",children:(0,p.jsxs)("div",{className:"stikcyWrapper",children:[(0,p.jsxs)("div",{className:"bioHolder",children:[(0,p.jsx)("h1",{children:"Intro"}),(0,p.jsx)("p",{children:null!==C&&void 0!==C&&C.bio?null===C||void 0===C?void 0:C.bio:"Hey , Welcome To Moviea . This Profile has no Bio Yet , Enjoy Watching \ud83d\udc95"})]}),(null===C||void 0===C||null===(N=C.recentlyWatched)||void 0===N?void 0:N.length)>=1&&"public"==(null===C||void 0===C?void 0:C.recentlyWatchedPrivacy)&&(0,p.jsxs)("div",{className:"latestHolder",children:[(0,p.jsx)("h1",{children:"recently watched"}),(0,p.jsx)("div",{className:"wrapperLatest",children:null===C||void 0===C||null===(k=C.recentlyWatched)||void 0===k?void 0:k.map((l=>(0,p.jsxs)(x.rU,{to:null===l||void 0===l?void 0:l.redirectToWatch,className:"latest",children:[(0,p.jsx)("img",{src:null===l||void 0===l?void 0:l.image,alt:"latest"}),(0,p.jsxs)("span",{children:[(null===l||void 0===l?void 0:l.nameWhenTn)||(null===l||void 0===l?void 0:l.name),l.episode?" Ep - "+l.episode:""]}),(0,p.jsx)(t.Wxs,{})]})))})]})]})}),(0,p.jsx)("div",{className:"reviewSection",children:(0,p.jsxs)("div",{className:"reviewsHolder",children:[(0,p.jsx)("div",{className:"reviewsContainer",children:H.map(((l,e)=>(0,p.jsx)(r.Z,{level:"user",review:l,user:C},e)))}),!H.length&&(0,p.jsx)("div",{className:"noReviewHolder",children:"This User Have no Reviews Yet !"})]})})]})]})}}}]);