"use strict";(self.webpackChunkmoviea=self.webpackChunkmoviea||[]).push([[855],{9138:(e,r,s)=>{s.r(r),s.d(r,{default:()=>v});var t=s(7313),l=s(798),n=s(2855),o=s(424),a=s(2135),i=s(1709),d=s(7452),c=s(2269),u=s(6417);const h=t.memo((e=>{let{query:r,isError:s,errorMessage:t}=e;return(0,u.jsxs)("div",{className:"emptyDataHolder",children:[(0,u.jsx)("img",{src:c.Z,alt:s?"error":"empty"}),(0,u.jsx)("h1",{children:s?t:'No results found for "'.concat(r,'"')}),!s&&(0,u.jsx)("p",{children:"Try different keywords or check your spelling"}),s&&(0,u.jsx)("p",{children:"Try searching for something else"})]})}));function m(e){let{movies:r,setMovies:s}=e;const c=d.d.useState((e=>e.loading)),m=(0,o.s0)(),v=(0,o.TH)(),[p,g]=(0,t.useState)(null),[x,f]=(0,t.useState)(""),[j,y]=(0,t.useState)(1),[w,N]=(0,t.useState)(1),[S,k]=(0,t.useState)(!1),E=(0,t.useMemo)((()=>new URLSearchParams(v.search).get("q")),[v.search]),_=(0,t.useCallback)((async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||!e.trim())return s([]),g(null),y(1),N(1),void d.d.update((e=>{e.loading=!1}));try{var o,a;t?k(!0):d.d.update((e=>{e.loading=!0}));const i=await l.Z.get("".concat(n.Z.search,"/").concat(encodeURIComponent(e.trim()),"/").concat(r)),c=(null===(o=i.data)||void 0===o?void 0:o.results)||[],u=(null===(a=i.data)||void 0===a?void 0:a.total_pages)||1,h=c.filter((e=>e&&(e.vote_average>0||"person"===e.media_type))).sort(((e,r)=>(r.popularity||0)-(e.popularity||0)));s(t?e=>[...e,...h]:h),y(r),N(u),g(null)}catch(p){console.error("Search error:",p);let r="An error occurred while searching. Please try again.";p.response?404===p.response.status?r="No results found. Try a different search term.":p.response.status>=500&&(r="Server error. Please try again later."):p.request&&(r="Network error. Please check your connection."),g(r),t||s([])}finally{t?k(!1):d.d.update((e=>{e.loading=!1}))}}),[s]);(0,t.useEffect)((()=>{E&&E.trim()?(f(E.trim()),y(1),_(E,1,!1)):m("/",{replace:!0})}),[E,m,_]),(0,t.useEffect)((()=>{const e=()=>{const e=window.pageYOffset||document.documentElement.scrollTop,r=document.documentElement.scrollHeight;e+document.documentElement.clientHeight>=r-300&&j<w&&!S&&!c&&E&&_(E,j+1,!0)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[j,w,S,c,E,_]);const L=(0,t.useCallback)((()=>{s([]),g(null),f(""),y(1),N(1),d.d.update((e=>{e.loading=!1}))}),[s]),C=(0,t.useMemo)((()=>r&&0!==r.length?r.map((e=>(0,u.jsx)(i.Z,{movie:e,isLarge:!1},"search-".concat(e.id,"-").concat(e.media_type||"movie")))):null),[r]);return(0,u.jsxs)("div",{className:"search_page",children:[c&&(0,u.jsx)("div",{className:"searchLoader",id:"searchLoader",children:(0,u.jsxs)("div",{id:"load",children:[(0,u.jsx)("div",{children:"L"}),(0,u.jsx)("div",{children:"O"}),(0,u.jsx)("div",{children:"A"}),(0,u.jsx)("div",{children:"D"}),(0,u.jsx)("div",{children:"I"}),(0,u.jsx)("div",{children:"N"}),(0,u.jsx)("div",{children:"G"})]})}),(0,u.jsx)("div",{id:"close_holder",children:(0,u.jsx)(a.rU,{to:"/",onClick:L,"aria-label":"Close search",children:"\xd7"})}),(0,u.jsx)("div",{className:"all_movies_holder",children:(0,u.jsx)("div",{className:"inner_all_movies_holder",children:p?(0,u.jsx)(h,{query:x,isError:!0,errorMessage:p}):C?(0,u.jsxs)(u.Fragment,{children:[C,S&&(0,u.jsx)("div",{className:"loadingMore",style:{textAlign:"center",padding:"20px",width:"100%",fontSize:"14px",color:"#888"},children:"Loading more results..."}),j>=w&&r.length>0&&(0,u.jsx)("div",{className:"endOfResults",style:{textAlign:"center",padding:"20px",width:"100%",fontSize:"14px",color:"#666"},children:"No more results"})]}):!c&&(0,u.jsx)(h,{query:x,isError:!1})})})]})}h.displayName="EmptyState";const v=t.memo(m)}}]);